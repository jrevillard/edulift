{
  "openapi": "3.0.0",
  "info": {
    "version": "1.0.0",
    "title": "EduLift API",
    "description": "API de gestion collaborative du transport scolaire",
    "contact": {
      "name": "EduLift Team",
      "email": "support@edulift.com"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3001/api/v1",
      "description": "Development server"
    },
    {
      "url": "https://api.edulift.com/api/v1",
      "description": "Production server"
    }
  ],
  "tags": [
    {
      "name": "Authentication",
      "description": "User authentication and authorization endpoints"
    },
    {
      "name": "Users",
      "description": "User management endpoints"
    },
    {
      "name": "Children",
      "description": "Children management endpoints"
    },
    {
      "name": "Vehicles",
      "description": "Vehicle management endpoints"
    },
    {
      "name": "Groups",
      "description": "Group management endpoints"
    },
    {
      "name": "Families",
      "description": "Family management endpoints"
    },
    {
      "name": "Schedule Slots",
      "description": "Schedule slot management and assignment endpoints"
    },
    {
      "name": "FCM Tokens",
      "description": "FCM token management and push notification endpoints"
    },
    {
      "name": "Dashboard",
      "description": "Dashboard and analytics endpoints"
    },
    {
      "name": "Invitations",
      "description": "Invitation management endpoints for families and groups"
    }
  ],
  "security": [
    {
      "BearerAuth": []
    }
  ],
  "components": {
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT access token"
      }
    },
    "schemas": {
      "RequestMagicLink": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "example": "user@example.com",
            "description": "User email address for authentication"
          },
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "example": "John Doe",
            "description": "User display name (required for new users, optional for existing users)"
          },
          "timezone": {
            "type": "string",
            "example": "America/New_York",
            "description": "User timezone (IANA format, optional)"
          },
          "inviteCode": {
            "type": "string",
            "example": "cl123456789012345678901234",
            "description": "Invitation code for joining family or group (optional)"
          },
          "code_challenge": {
            "type": "string",
            "minLength": 43,
            "maxLength": 128,
            "example": "aB3dE5fG7hJ9kLmNoPqRsTuVwXyZ1234567890ABCDEFG",
            "description": "PKCE code challenge for security (optional but recommended)"
          }
        },
        "required": [
          "email",
          "code_challenge"
        ],
        "title": "Request Magic Link",
        "description": "Request a magic link for passwordless authentication"
      },
      "VerifyMagicLink": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "minLength": 1,
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
            "description": "Magic link token received in email"
          },
          "code_verifier": {
            "type": "string",
            "minLength": 43,
            "maxLength": 128,
            "example": "aB3dE5fG7hJ9kLmNoPqRsTuVwXyZ1234567890ABCDEFG",
            "description": "PKCE code verifier for security (required)"
          }
        },
        "required": [
          "token",
          "code_verifier"
        ],
        "title": "Verify Magic Link",
        "description": "Verify magic link token and get JWT tokens"
      },
      "RefreshTokenRequest": {
        "type": "object",
        "properties": {
          "refreshToken": {
            "type": "string",
            "minLength": 1,
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
            "description": "Valid refresh token for token rotation"
          }
        },
        "required": [
          "refreshToken"
        ],
        "title": "Refresh Token",
        "description": "Refresh JWT access token using refresh token"
      },
      "LogoutRequest": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
            "description": "Refresh token to revoke (optional, will revoke all tokens for user if not provided)"
          },
          "token_type_hint": {
            "type": "string",
            "enum": [
              "refresh_token"
            ],
            "example": "refresh_token",
            "description": "Token type hint (optional)"
          }
        },
        "title": "Logout Request",
        "description": "RFC 7009 compliant token revocation request"
      },
      "UpdateProfileRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "example": "John Doe",
            "description": "User display name"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "user@example.com",
            "description": "User email address"
          },
          "timezone": {
            "type": "string",
            "example": "America/New_York",
            "description": "User timezone (IANA format)"
          }
        },
        "title": "Update Profile",
        "description": "Update user profile information"
      },
      "UpdateTimezoneRequest": {
        "type": "object",
        "properties": {
          "timezone": {
            "type": "string",
            "minLength": 1,
            "example": "America/New_York",
            "description": "Valid IANA timezone (e.g., America/New_York, Europe/Paris)"
          }
        },
        "required": [
          "timezone"
        ],
        "title": "Update Timezone",
        "description": "Update user timezone setting"
      },
      "RequestAccountDeletion": {
        "type": "object",
        "properties": {
          "code_challenge": {
            "type": "string",
            "minLength": 43,
            "maxLength": 128,
            "example": "aB3dE5fG7hJ9kLmNoPqRsTuVwXyZ1234567890ABCDEFG",
            "description": "PKCE code challenge for secure account deletion confirmation email"
          }
        },
        "required": [
          "code_challenge"
        ],
        "title": "Request Account Deletion",
        "description": "Request a secure account deletion confirmation email with PKCE-protected link"
      },
      "ConfirmAccountDeletion": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "minLength": 1,
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
            "description": "Deletion confirmation token received in email"
          },
          "code_verifier": {
            "type": "string",
            "minLength": 43,
            "maxLength": 128,
            "example": "aB3dE5fG7hJ9kLmNoPqRsTuVwXyZ1234567890ABCDEFG",
            "description": "PKCE code verifier to validate the deletion token"
          }
        },
        "required": [
          "token",
          "code_verifier"
        ],
        "title": "Confirm Account Deletion",
        "description": "Confirm account deletion using PKCE-protected token from email"
      },
      "AuthResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true,
            "description": "Request success status"
          },
          "data": {
            "type": "object",
            "properties": {
              "user": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "example": "cl123456789012345678901234",
                    "description": "User ID"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "user@example.com",
                    "description": "User email address"
                  },
                  "name": {
                    "type": "string",
                    "example": "John Doe",
                    "description": "User display name"
                  },
                  "timezone": {
                    "type": "string",
                    "nullable": true,
                    "example": "America/New_York",
                    "description": "User timezone (IANA format)"
                  },
                  "createdAt": {
                    "type": "string",
                    "format": "date-time",
                    "example": "2023-01-01T00:00:00.000Z",
                    "description": "User creation timestamp"
                  },
                  "updatedAt": {
                    "type": "string",
                    "format": "date-time",
                    "example": "2023-01-01T00:00:00.000Z",
                    "description": "Last update timestamp"
                  }
                },
                "required": [
                  "id",
                  "email",
                  "name",
                  "timezone",
                  "createdAt",
                  "updatedAt"
                ],
                "title": "User Response",
                "description": "User profile information"
              },
              "accessToken": {
                "type": "string",
                "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                "description": "JWT access token (15 minute lifetime)"
              },
              "refreshToken": {
                "type": "string",
                "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                "description": "JWT refresh token (7 day lifetime)"
              },
              "expiresIn": {
                "type": "number",
                "example": 900,
                "description": "Access token expiration time in seconds"
              },
              "tokenType": {
                "type": "string",
                "example": "Bearer",
                "description": "Token type"
              },
              "token": {
                "type": "string",
                "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                "description": "Legacy access token field (deprecated, use accessToken)"
              },
              "expiresAt": {
                "type": "string",
                "format": "date-time",
                "example": "2023-01-01T00:15:00.000Z",
                "description": "Legacy expiration timestamp (deprecated, use expiresIn)"
              },
              "invitationResult": {
                "type": "object",
                "nullable": true,
                "properties": {
                  "processed": {
                    "type": "boolean",
                    "example": true,
                    "description": "Whether invitation was processed"
                  },
                  "invitationType": {
                    "type": "string",
                    "enum": [
                      "FAMILY",
                      "GROUP"
                    ],
                    "example": "FAMILY",
                    "description": "Type of invitation processed"
                  },
                  "redirectUrl": {
                    "type": "string",
                    "example": "/dashboard",
                    "description": "URL to redirect after processing"
                  },
                  "requiresFamilyOnboarding": {
                    "type": "boolean",
                    "example": false,
                    "description": "Whether family onboarding is required"
                  },
                  "reason": {
                    "type": "string",
                    "example": "Already a member of this family",
                    "description": "Reason if invitation processing failed"
                  }
                },
                "required": [
                  "processed"
                ],
                "description": "Invitation processing result (if applicable)"
              }
            },
            "required": [
              "user",
              "accessToken",
              "refreshToken",
              "expiresIn",
              "tokenType"
            ]
          }
        },
        "required": [
          "success",
          "data"
        ],
        "title": "Authentication Response",
        "description": "Authentication response with JWT tokens and user information"
      },
      "RefreshTokenResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true,
            "description": "Request success status"
          },
          "data": {
            "type": "object",
            "properties": {
              "accessToken": {
                "type": "string",
                "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                "description": "New JWT access token"
              },
              "refreshToken": {
                "type": "string",
                "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                "description": "New JWT refresh token (rotated for security)"
              },
              "expiresIn": {
                "type": "number",
                "example": 900,
                "description": "Access token expiration time in seconds"
              },
              "tokenType": {
                "type": "string",
                "example": "Bearer",
                "description": "Token type"
              }
            },
            "required": [
              "accessToken",
              "refreshToken",
              "expiresIn",
              "tokenType"
            ]
          }
        },
        "required": [
          "success",
          "data"
        ],
        "title": "Refresh Token Response",
        "description": "Token refresh response with new JWT tokens"
      },
      "ProfileUpdateResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "example": "cl123456789012345678901234",
                "description": "User ID"
              },
              "email": {
                "type": "string",
                "format": "email",
                "example": "user@example.com",
                "description": "User email address"
              },
              "name": {
                "type": "string",
                "example": "John Doe",
                "description": "User display name"
              },
              "timezone": {
                "type": "string",
                "nullable": true,
                "example": "America/New_York",
                "description": "User timezone (IANA format)"
              },
              "createdAt": {
                "type": "string",
                "format": "date-time",
                "example": "2023-01-01T00:00:00.000Z",
                "description": "User creation timestamp"
              },
              "updatedAt": {
                "type": "string",
                "format": "date-time",
                "example": "2023-01-01T00:00:00.000Z",
                "description": "Last update timestamp"
              }
            },
            "required": [
              "id",
              "email",
              "name",
              "timezone",
              "createdAt",
              "updatedAt"
            ],
            "title": "User Response",
            "description": "User profile information"
          }
        },
        "required": [
          "success",
          "data"
        ],
        "title": "Profile Update Response",
        "description": "Successful profile update response with user data"
      },
      "ProfileGetResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "example": "cl123456789012345678901234",
                "description": "User ID"
              },
              "email": {
                "type": "string",
                "format": "email",
                "example": "user@example.com",
                "description": "User email address"
              },
              "name": {
                "type": "string",
                "example": "John Doe",
                "description": "User display name"
              },
              "timezone": {
                "type": "string",
                "nullable": true,
                "example": "America/New_York",
                "description": "User timezone (IANA format)"
              },
              "createdAt": {
                "type": "string",
                "format": "date-time",
                "example": "2023-01-01T00:00:00.000Z",
                "description": "User creation timestamp"
              },
              "updatedAt": {
                "type": "string",
                "format": "date-time",
                "example": "2023-01-01T00:00:00.000Z",
                "description": "Last update timestamp"
              }
            },
            "required": [
              "id",
              "email",
              "name",
              "timezone",
              "createdAt",
              "updatedAt"
            ],
            "title": "User Response",
            "description": "User profile information"
          }
        },
        "required": [
          "success",
          "data"
        ],
        "title": "Profile Get Response",
        "description": "Successful profile retrieval response with user data"
      },
      "DeleteAccountResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "object",
            "properties": {
              "message": {
                "type": "string",
                "example": "Account deleted successfully",
                "description": "Confirmation message indicating successful account deletion"
              },
              "deletedAt": {
                "type": "string",
                "example": "2023-12-01T12:00:00.000Z",
                "description": "Timestamp when the account was deleted (ISO 8601 format)"
              }
            },
            "required": [
              "message",
              "deletedAt"
            ]
          }
        },
        "required": [
          "success",
          "data"
        ],
        "title": "Account Deletion Response",
        "description": "Successful account deletion response with confirmation details"
      },
      "CreateChildRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "example": "Emma Johnson",
            "description": "Child full name"
          },
          "age": {
            "type": "integer",
            "minimum": 0,
            "maximum": 18,
            "example": 8,
            "description": "Child age (0-18 years, optional)"
          }
        },
        "required": [
          "name"
        ],
        "title": "Create Child",
        "description": "Create a new child record in the family"
      },
      "UpdateChildRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "example": "Emma Johnson-Smith",
            "description": "Updated child full name"
          },
          "age": {
            "type": "integer",
            "minimum": 0,
            "maximum": 18,
            "example": 9,
            "description": "Updated child age (0-18 years, optional)"
          }
        },
        "title": "Update Child",
        "description": "Update child information"
      },
      "CreateVehicleRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "example": "Honda Odyssey",
            "description": "Vehicle name or model"
          },
          "capacity": {
            "type": "integer",
            "minimum": 1,
            "maximum": 10,
            "example": 7,
            "description": "Vehicle seating capacity (1-10 seats)"
          }
        },
        "required": [
          "name",
          "capacity"
        ],
        "title": "Create Vehicle",
        "description": "Create a new vehicle record in the family"
      },
      "UpdateVehicleRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "example": "Toyota Sienna",
            "description": "Updated vehicle name or model"
          },
          "capacity": {
            "type": "integer",
            "minimum": 1,
            "maximum": 10,
            "example": 8,
            "description": "Updated vehicle seating capacity (1-10 seats)"
          }
        },
        "title": "Update Vehicle",
        "description": "Update vehicle information"
      },
      "CreateGroupRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "example": "Morning School Run",
            "description": "Group display name"
          },
          "description": {
            "type": "string",
            "maxLength": 500,
            "example": "Carpool group for morning school transportation",
            "description": "Optional group description"
          }
        },
        "required": [
          "name"
        ],
        "title": "Create Group",
        "description": "Create a new group. Requires family admin permissions."
      },
      "JoinGroupRequest": {
        "type": "object",
        "properties": {
          "inviteCode": {
            "type": "string",
            "minLength": 1,
            "example": "ABC123XYZ",
            "description": "Group invitation code"
          }
        },
        "required": [
          "inviteCode"
        ],
        "title": "Join Group",
        "description": "Join a group using invitation code"
      },
      "UpdateGroupRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "example": "Updated Morning School Run",
            "description": "Updated group name"
          },
          "description": {
            "type": "string",
            "maxLength": 500,
            "example": "Updated description for the group",
            "description": "Updated group description"
          }
        },
        "title": "Update Group",
        "description": "Update group information (partial)"
      },
      "UpdateFamilyRoleRequest": {
        "type": "object",
        "properties": {
          "role": {
            "type": "string",
            "enum": [
              "MEMBER",
              "ADMIN",
              "OWNER"
            ],
            "description": "New role for the family in the group",
            "example": "ADMIN"
          }
        },
        "required": [
          "role"
        ],
        "title": "Update Family Role",
        "description": "Update a family role within a group"
      },
      "InviteFamilyRequest": {
        "type": "object",
        "properties": {
          "familyId": {
            "type": "string",
            "minLength": 1,
            "example": "cl123456789012345678901234",
            "description": "Target family ID to invite"
          },
          "role": {
            "type": "string",
            "enum": [
              "MEMBER",
              "ADMIN",
              "OWNER"
            ],
            "default": "MEMBER",
            "description": "Role for the invited family (defaults to MEMBER)",
            "example": "MEMBER"
          },
          "personalMessage": {
            "type": "string",
            "maxLength": 500,
            "example": "Looking forward to carpooling with you!",
            "description": "Optional personal message for the invitation"
          }
        },
        "required": [
          "familyId"
        ],
        "title": "Invite Family",
        "description": "Invite a family to join the group"
      },
      "SearchFamiliesRequest": {
        "type": "object",
        "properties": {
          "searchTerm": {
            "type": "string",
            "minLength": 1,
            "example": "Johnson",
            "description": "Search term to find families by name"
          }
        },
        "required": [
          "searchTerm"
        ],
        "title": "Search Families",
        "description": "Search for families to invite to the group"
      },
      "ValidateInviteRequest": {
        "type": "object",
        "properties": {
          "inviteCode": {
            "type": "string",
            "minLength": 1,
            "example": "ABC123XYZ",
            "description": "Invitation code to validate"
          }
        },
        "required": [
          "inviteCode"
        ],
        "title": "Validate Invite Code",
        "description": "Validate a group invitation code"
      },
      "UpdateScheduleConfigRequest": {
        "type": "object",
        "properties": {
          "scheduleHours": {
            "type": "object",
            "additionalProperties": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "example": {
              "MONDAY": [
                "07:00",
                "07:30",
                "08:00",
                "15:00",
                "15:30",
                "16:00"
              ],
              "TUESDAY": [
                "07:00",
                "08:00",
                "15:00",
                "16:00"
              ],
              "FRIDAY": [
                "07:00",
                "07:30",
                "08:00",
                "15:00",
                "16:00"
              ]
            },
            "description": "Schedule hours by day of week (HH:MM format)"
          }
        },
        "required": [
          "scheduleHours"
        ],
        "title": "Update Schedule Configuration",
        "description": "Update group schedule configuration"
      },
      "GroupFamiliesResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ]
          },
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "format": "cuid",
                  "example": "cl123456789012345678901237",
                  "description": "Family identifier"
                },
                "name": {
                  "type": "string",
                  "example": "Johnson Family",
                  "description": "Family name"
                },
                "role": {
                  "type": "string",
                  "enum": [
                    "MEMBER",
                    "ADMIN",
                    "OWNER"
                  ],
                  "description": "Family role in the group",
                  "example": "MEMBER"
                },
                "isMyFamily": {
                  "type": "boolean",
                  "example": false,
                  "description": "Whether this is the requester's family"
                },
                "canManage": {
                  "type": "boolean",
                  "example": false,
                  "description": "Whether the requester can manage this family"
                },
                "admins": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "email": {
                        "type": "string",
                        "format": "email"
                      }
                    },
                    "required": [
                      "name",
                      "email"
                    ]
                  },
                  "description": "Family admin contacts",
                  "example": [
                    {
                      "name": "John Johnson",
                      "email": "john@example.com"
                    }
                  ]
                }
              },
              "required": [
                "id",
                "name",
                "role",
                "isMyFamily",
                "canManage",
                "admins"
              ],
              "title": "Group Family",
              "description": "Family information for group families endpoint"
            }
          }
        },
        "required": [
          "success",
          "data"
        ],
        "title": "Group Families Response",
        "description": "Response for get group families endpoint"
      },
      "CreateFamilyRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "example": "Johnson Family",
            "description": "Family display name"
          }
        },
        "required": [
          "name"
        ],
        "title": "Create Family",
        "description": "Create a new family"
      },
      "JoinFamilyRequest": {
        "type": "object",
        "properties": {
          "inviteCode": {
            "type": "string",
            "minLength": 1,
            "example": "ABC123XYZ",
            "description": "Family invitation code"
          }
        },
        "required": [
          "inviteCode"
        ],
        "title": "Join Family",
        "description": "Join a family using invitation code"
      },
      "UpdateMemberRoleRequest": {
        "type": "object",
        "properties": {
          "role": {
            "type": "string",
            "enum": [
              "ADMIN",
              "MEMBER"
            ],
            "description": "New role for the family member",
            "example": "ADMIN"
          }
        },
        "required": [
          "role"
        ],
        "title": "Update Member Role",
        "description": "Update a family member role"
      },
      "UpdateFamilyNameRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "example": "Updated Johnson Family",
            "description": "Updated family name"
          }
        },
        "required": [
          "name"
        ],
        "title": "Update Family Name",
        "description": "Update family name"
      },
      "InviteMemberRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "example": "john.smith@example.com",
            "description": "Email address of the person to invite"
          },
          "role": {
            "type": "string",
            "enum": [
              "ADMIN",
              "MEMBER"
            ],
            "default": "MEMBER",
            "description": "Role for the invited member (defaults to MEMBER)",
            "example": "MEMBER"
          },
          "personalMessage": {
            "type": "string",
            "nullable": true,
            "maxLength": 500,
            "example": "Welcome to our family!",
            "description": "Optional personal message for the invitation"
          }
        },
        "required": [
          "email"
        ],
        "title": "Invite Family Member",
        "description": "Invite a new member to join the family"
      },
      "ValidateInviteCodeRequest": {
        "type": "object",
        "properties": {
          "inviteCode": {
            "type": "string",
            "minLength": 1,
            "example": "ABC123XYZ",
            "description": "Family invitation code to validate"
          }
        },
        "required": [
          "inviteCode"
        ],
        "title": "Validate Invite Code",
        "description": "Validate a family invitation code"
      },
      "WeeklyDashboardResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [
              true
            ],
            "description": "Operation success indicator"
          },
          "data": {
            "type": "object",
            "properties": {
              "weekStart": {
                "type": "string",
                "format": "date-time",
                "example": "2023-01-01T00:00:00.000Z",
                "description": "Week start date in ISO 8601 format"
              },
              "weekEnd": {
                "type": "string",
                "format": "date-time",
                "example": "2023-01-07T23:59:59.999Z",
                "description": "Week end date in ISO 8601 format"
              },
              "days": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "date": {
                      "type": "string",
                      "example": "2023-01-01",
                      "description": "Date in YYYY-MM-DD format"
                    },
                    "dayName": {
                      "type": "string",
                      "example": "Sunday",
                      "description": "Day name"
                    },
                    "transportSlots": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "cuid"
                          },
                          "time": {
                            "type": "string"
                          },
                          "groupId": {
                            "type": "string",
                            "nullable": true,
                            "format": "cuid"
                          },
                          "groupName": {
                            "type": "string"
                          },
                          "vehicleId": {
                            "type": "string",
                            "nullable": true,
                            "format": "cuid"
                          },
                          "vehicleName": {
                            "type": "string",
                            "nullable": true
                          },
                          "driverId": {
                            "type": "string",
                            "nullable": true,
                            "format": "cuid"
                          },
                          "driverName": {
                            "type": "string",
                            "nullable": true
                          },
                          "children": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "cuid"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "familyId": {
                                  "type": "string",
                                  "format": "cuid"
                                },
                                "familyName": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "id",
                                "name",
                                "familyId",
                                "familyName"
                              ]
                            }
                          },
                          "capacity": {
                            "type": "integer",
                            "minimum": 0
                          },
                          "capacityStatus": {
                            "type": "string",
                            "enum": [
                              "AVAILABLE",
                              "FULL",
                              "OVERFLOW"
                            ]
                          },
                          "isMorning": {
                            "type": "boolean"
                          }
                        },
                        "required": [
                          "id",
                          "time",
                          "groupId",
                          "groupName",
                          "vehicleId",
                          "vehicleName",
                          "driverId",
                          "driverName",
                          "children",
                          "capacity",
                          "capacityStatus",
                          "isMorning"
                        ]
                      }
                    },
                    "hasTransport": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "date",
                    "dayName",
                    "transportSlots",
                    "hasTransport"
                  ]
                },
                "description": "Array of days in the week with their transport schedules"
              },
              "summary": {
                "type": "object",
                "properties": {
                  "totalDays": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "daysWithTransport": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "totalTransportSlots": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "childrenWithTransport": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "uniqueVehicles": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "uniqueDrivers": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "coveragePercentage": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 100
                  }
                },
                "required": [
                  "totalDays",
                  "daysWithTransport",
                  "totalTransportSlots",
                  "childrenWithTransport",
                  "uniqueVehicles",
                  "uniqueDrivers",
                  "coveragePercentage"
                ]
              }
            },
            "required": [
              "weekStart",
              "weekEnd",
              "days",
              "summary"
            ],
            "description": "Weekly dashboard data including schedules and summary"
          }
        },
        "required": [
          "success",
          "data"
        ],
        "title": "Weekly Dashboard Response",
        "description": "Complete weekly dashboard with schedules and summary statistics"
      },
      "CreateFamilyInvitationRequest": {
        "type": "object",
        "properties": {
          "familyId": {
            "type": "string",
            "format": "cuid",
            "example": "cl123456789012345678901234",
            "description": "Family identifier to invite to"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "john.smith@example.com",
            "description": "Email address of the person to invite"
          },
          "role": {
            "type": "string",
            "enum": [
              "ADMIN",
              "MEMBER"
            ],
            "description": "Role for the invited member in the family",
            "example": "MEMBER"
          },
          "personalMessage": {
            "type": "string",
            "maxLength": 500,
            "example": "Welcome to our family!",
            "description": "Optional personal message for the invitation"
          }
        },
        "required": [
          "familyId",
          "email",
          "role"
        ],
        "title": "Create Family Invitation",
        "description": "Create a new family invitation"
      },
      "CreateGroupInvitationRequest": {
        "type": "object",
        "properties": {
          "groupId": {
            "type": "string",
            "format": "cuid",
            "example": "cl123456789012345678901235",
            "description": "Group identifier to invite to"
          },
          "targetFamilyId": {
            "type": "string",
            "format": "cuid",
            "example": "cl123456789012345678901236",
            "description": "Target family identifier (optional)"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "john.smith@example.com",
            "description": "Email address of the person to invite (optional)"
          },
          "role": {
            "type": "string",
            "enum": [
              "ADMIN",
              "MEMBER"
            ],
            "description": "Role for the invited member in the group",
            "example": "MEMBER"
          },
          "personalMessage": {
            "type": "string",
            "maxLength": 500,
            "example": "Welcome to our group!",
            "description": "Optional personal message for the invitation"
          }
        },
        "required": [
          "groupId",
          "role"
        ],
        "title": "Create Group Invitation",
        "description": "Create a new group invitation"
      },
      "AcceptFamilyInvitationRequest": {
        "type": "object",
        "properties": {
          "leaveCurrentFamily": {
            "type": "boolean",
            "default": false,
            "example": false,
            "description": "Whether to leave current family when accepting invitation"
          }
        },
        "title": "Accept Family Invitation",
        "description": "Accept a family invitation"
      },
      "CreateScheduleSlotWithVehicleRequest": {
        "type": "object",
        "properties": {
          "datetime": {
            "type": "string",
            "format": "date-time",
            "example": "2023-12-15T08:00:00.000Z",
            "description": "Schedule slot datetime (ISO 8601 UTC format)"
          },
          "vehicleId": {
            "type": "string",
            "format": "cuid",
            "example": "cl123456789012345678901237",
            "description": "Vehicle identifier for assignment"
          },
          "driverId": {
            "type": "string",
            "format": "cuid",
            "example": "cl123456789012345678901239",
            "description": "Optional driver identifier"
          },
          "seatOverride": {
            "type": "integer",
            "minimum": 0,
            "maximum": 10,
            "example": 6,
            "description": "Optional seat capacity override for this assignment"
          }
        },
        "required": [
          "datetime",
          "vehicleId"
        ],
        "title": "Create Schedule Slot with Vehicle",
        "description": "Create a new schedule slot with vehicle assignment"
      },
      "AssignVehicleRequest": {
        "type": "object",
        "properties": {
          "vehicleId": {
            "type": "string",
            "format": "cuid",
            "example": "cl123456789012345678901237",
            "description": "Vehicle identifier to assign"
          },
          "driverId": {
            "type": "string",
            "format": "cuid",
            "example": "cl123456789012345678901239",
            "description": "Optional driver identifier for the assignment"
          },
          "seatOverride": {
            "type": "integer",
            "minimum": 0,
            "maximum": 10,
            "example": 6,
            "description": "Optional seat capacity override for this assignment"
          }
        },
        "required": [
          "vehicleId"
        ],
        "title": "Assign Vehicle to Schedule Slot",
        "description": "Assign a vehicle to an existing schedule slot"
      },
      "AssignChildRequest": {
        "type": "object",
        "properties": {
          "childId": {
            "type": "string",
            "format": "cuid",
            "example": "cl123456789012345678901238",
            "description": "Child identifier to assign"
          },
          "vehicleAssignmentId": {
            "type": "string",
            "format": "cuid",
            "example": "cl123456789012345678901236",
            "description": "Vehicle assignment identifier for the child"
          }
        },
        "required": [
          "childId",
          "vehicleAssignmentId"
        ],
        "title": "Assign Child to Schedule Slot",
        "description": "Assign a child to a specific vehicle assignment in a schedule slot"
      },
      "UpdateDriverRequest": {
        "type": "object",
        "properties": {
          "driverId": {
            "type": "string",
            "nullable": true,
            "format": "cuid",
            "example": "cl123456789012345678901239",
            "description": "New driver identifier (null to remove driver)"
          }
        },
        "required": [
          "driverId"
        ],
        "title": "Update Vehicle Driver",
        "description": "Update or remove driver for a vehicle assignment"
      },
      "VehicleIdRequest": {
        "type": "object",
        "properties": {
          "vehicleId": {
            "type": "string",
            "format": "cuid",
            "example": "cl123456789012345678901237",
            "description": "Vehicle identifier to remove"
          }
        },
        "required": [
          "vehicleId"
        ],
        "title": "Vehicle ID for Removal",
        "description": "Vehicle identifier for removal from schedule slot"
      },
      "UpdateSeatOverrideRequest": {
        "type": "object",
        "properties": {
          "seatOverride": {
            "type": "integer",
            "minimum": 0,
            "maximum": 10,
            "example": 6,
            "description": "New seat capacity override"
          }
        },
        "title": "Update Seat Override",
        "description": "Update seat capacity override for vehicle assignment"
      }
    },
    "parameters": {}
  },
  "paths": {
    "/auth/magic-link": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Request magic link for authentication",
        "description": "Send a magic link to the user email for passwordless authentication",
        "security": [],
        "operationId": "postauthMagicLink",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RequestMagicLink"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Magic link sent successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "userExists": {
                          "type": "boolean"
                        }
                      },
                      "required": [
                        "message",
                        "userExists"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data"
          },
          "422": {
            "description": "Unprocessable entity - Validation failed"
          }
        }
      }
    },
    "/auth/verify": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Verify magic link and get JWT token",
        "description": "Verify the magic link token and code verifier to authenticate the user and receive JWT tokens",
        "security": [],
        "operationId": "postauthVerify",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Invitation code for joining family or group"
            },
            "required": false,
            "description": "Invitation code for joining family or group",
            "name": "inviteCode",
            "in": "query"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VerifyMagicLink"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Authentication successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data"
          },
          "401": {
            "description": "Unauthorized - Invalid or expired magic link"
          }
        }
      }
    },
    "/auth/refresh": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Refresh JWT token",
        "description": "Refresh the JWT access token using a valid refresh token with token rotation",
        "security": [],
        "operationId": "postauthRefresh",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshTokenRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token refreshed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RefreshTokenResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Refresh token required"
          },
          "401": {
            "description": "Unauthorized - Invalid or expired refresh token"
          }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Logout and revoke refresh tokens",
        "description": "Revoke the refresh token to logout the user (RFC 7009 compliant)",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postauthLogout",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LogoutRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Logout successful"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          }
        }
      }
    },
    "/auth/profile": {
      "put": {
        "tags": [
          "Authentication"
        ],
        "summary": "Update user profile",
        "description": "Update the authenticated user profile information",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "putauthProfile",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProfileRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProfileUpdateResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data or timezone"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          }
        }
      },
      "get": {
        "tags": [
          "Authentication"
        ],
        "summary": "Get user profile",
        "description": "Get the authenticated user profile information",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getauthProfile",
        "responses": {
          "200": {
            "description": "Profile retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProfileGetResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          }
        }
      }
    },
    "/auth/timezone": {
      "patch": {
        "tags": [
          "Authentication"
        ],
        "summary": "Update user timezone",
        "description": "Update the authenticated user timezone setting",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "patchauthTimezone",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTimezoneRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Timezone updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProfileUpdateResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid timezone format"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          }
        }
      }
    },
    "/auth/profile/delete-request": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Request account deletion confirmation",
        "description": "Send a confirmation email with PKCE-protected link for account deletion. This initiates a secure two-step deletion process to prevent accidental account loss.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postauthProfileDeleteRequest",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RequestAccountDeletion"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Account deletion confirmation email sent successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "Account deletion confirmation email sent. Please check your inbox and follow the link to confirm deletion.",
                          "description": "Success message indicating the confirmation email has been sent"
                        },
                        "expiresAt": {
                          "type": "string",
                          "example": "2023-12-01T12:00:00.000Z",
                          "description": "Expiration time of the deletion confirmation link (ISO 8601 format)"
                        }
                      },
                      "required": [
                        "message",
                        "expiresAt"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid PKCE code challenge",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string",
                      "example": "Invalid PKCE code challenge format",
                      "description": "Error message explaining the validation failure"
                    },
                    "validationErrors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "code": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "field",
                          "message",
                          "code"
                        ]
                      }
                    }
                  },
                  "required": [
                    "success",
                    "error"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not found - User account not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal server error - Failed to send confirmation email",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/auth/profile/delete-confirm": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Confirm account deletion",
        "description": "Confirm account deletion using PKCE-protected token from email. This permanently deletes the user account and all associated data including family relationships, group memberships, and personal information. This action is irreversible.",
        "security": [],
        "operationId": "postauthProfileDeleteConfirm",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConfirmAccountDeletion"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Account deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteAccountResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid token or PKCE code verifier",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string",
                      "example": "Invalid deletion token or PKCE verification failed",
                      "description": "Error message explaining the validation failure"
                    },
                    "validationErrors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "field": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "code": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "field",
                          "message",
                          "code"
                        ]
                      }
                    }
                  },
                  "required": [
                    "success",
                    "error"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Token expired or already used",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string",
                      "example": "Deletion token has expired or already been used",
                      "description": "Error message indicating token is no longer valid"
                    }
                  },
                  "required": [
                    "success",
                    "error"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not found - Invalid deletion token or user not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal server error - Failed to complete account deletion",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/children": {
      "post": {
        "tags": [
          "Children"
        ],
        "summary": "Create a new child",
        "description": "Add a new child to the authenticated user family. Requires family admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postchildren",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateChildRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Child created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Unique child identifier (CUID format)"
                        },
                        "name": {
                          "type": "string",
                          "example": "Emma Johnson",
                          "description": "Child full name"
                        },
                        "age": {
                          "type": "number",
                          "nullable": true,
                          "example": 8,
                          "description": "Child age (null if not specified)"
                        },
                        "familyId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901236",
                          "description": "Family identifier the child belongs to"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Child creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Last update timestamp"
                        },
                        "groupMemberships": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid"
                              },
                              "childId": {
                                "type": "string",
                                "format": "cuid"
                              },
                              "groupId": {
                                "type": "string",
                                "format": "cuid"
                              },
                              "joinedAt": {
                                "type": "string",
                                "format": "date-time"
                              },
                              "group": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid"
                                  },
                                  "name": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name"
                                ]
                              }
                            },
                            "required": [
                              "id",
                              "childId",
                              "groupId",
                              "joinedAt",
                              "group"
                            ]
                          },
                          "description": "Group memberships (included when fetching all children)"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "age",
                        "familyId",
                        "createdAt",
                        "updatedAt"
                      ],
                      "title": "Child Response",
                      "description": "Complete child information with optional group memberships"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions or no family"
          }
        }
      },
      "get": {
        "tags": [
          "Children"
        ],
        "summary": "Get user children",
        "description": "Retrieve all children belonging to the authenticated user family",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getchildren",
        "responses": {
          "200": {
            "description": "Children retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901234",
                            "description": "Unique child identifier (CUID format)"
                          },
                          "name": {
                            "type": "string",
                            "example": "Emma Johnson",
                            "description": "Child full name"
                          },
                          "age": {
                            "type": "number",
                            "nullable": true,
                            "example": 8,
                            "description": "Child age (null if not specified)"
                          },
                          "familyId": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901236",
                            "description": "Family identifier the child belongs to"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2023-01-01T00:00:00.000Z",
                            "description": "Child creation timestamp"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2023-01-01T00:00:00.000Z",
                            "description": "Last update timestamp"
                          },
                          "groupMemberships": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "cuid"
                                },
                                "childId": {
                                  "type": "string",
                                  "format": "cuid"
                                },
                                "groupId": {
                                  "type": "string",
                                  "format": "cuid"
                                },
                                "joinedAt": {
                                  "type": "string",
                                  "format": "date-time"
                                },
                                "group": {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "string",
                                      "format": "cuid"
                                    },
                                    "name": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "name"
                                  ]
                                }
                              },
                              "required": [
                                "id",
                                "childId",
                                "groupId",
                                "joinedAt",
                                "group"
                              ]
                            },
                            "description": "Group memberships (included when fetching all children)"
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "age",
                          "familyId",
                          "createdAt",
                          "updatedAt"
                        ],
                        "title": "Child Response",
                        "description": "Complete child information with optional group memberships"
                      }
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          }
        }
      }
    },
    "/children/{childId}": {
      "get": {
        "tags": [
          "Children"
        ],
        "summary": "Get specific child",
        "description": "Retrieve detailed information about a specific child by ID",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getchildrenByChildId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique child identifier (CUID format)"
            },
            "required": true,
            "description": "Unique child identifier (CUID format)",
            "name": "childId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Child retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Unique child identifier (CUID format)"
                        },
                        "name": {
                          "type": "string",
                          "example": "Emma Johnson",
                          "description": "Child full name"
                        },
                        "age": {
                          "type": "number",
                          "nullable": true,
                          "example": 8,
                          "description": "Child age (null if not specified)"
                        },
                        "familyId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901236",
                          "description": "Family identifier the child belongs to"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Child creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Last update timestamp"
                        },
                        "groupMemberships": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid"
                              },
                              "childId": {
                                "type": "string",
                                "format": "cuid"
                              },
                              "groupId": {
                                "type": "string",
                                "format": "cuid"
                              },
                              "joinedAt": {
                                "type": "string",
                                "format": "date-time"
                              },
                              "group": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid"
                                  },
                                  "name": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name"
                                ]
                              }
                            },
                            "required": [
                              "id",
                              "childId",
                              "groupId",
                              "joinedAt",
                              "group"
                            ]
                          },
                          "description": "Group memberships (included when fetching all children)"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "age",
                        "familyId",
                        "createdAt",
                        "updatedAt"
                      ],
                      "title": "Child Response",
                      "description": "Complete child information with optional group memberships"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid child ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Child not accessible"
          },
          "404": {
            "description": "Not found - Child does not exist"
          }
        }
      },
      "put": {
        "tags": [
          "Children"
        ],
        "summary": "Update child (PUT)",
        "description": "Update child information completely. Requires family admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "putchildrenByChildId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique child identifier (CUID format)"
            },
            "required": true,
            "description": "Unique child identifier (CUID format)",
            "name": "childId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateChildRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Child updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Unique child identifier (CUID format)"
                        },
                        "name": {
                          "type": "string",
                          "example": "Emma Johnson",
                          "description": "Child full name"
                        },
                        "age": {
                          "type": "number",
                          "nullable": true,
                          "example": 8,
                          "description": "Child age (null if not specified)"
                        },
                        "familyId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901236",
                          "description": "Family identifier the child belongs to"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Child creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Last update timestamp"
                        },
                        "groupMemberships": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid"
                              },
                              "childId": {
                                "type": "string",
                                "format": "cuid"
                              },
                              "groupId": {
                                "type": "string",
                                "format": "cuid"
                              },
                              "joinedAt": {
                                "type": "string",
                                "format": "date-time"
                              },
                              "group": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid"
                                  },
                                  "name": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name"
                                ]
                              }
                            },
                            "required": [
                              "id",
                              "childId",
                              "groupId",
                              "joinedAt",
                              "group"
                            ]
                          },
                          "description": "Group memberships (included when fetching all children)"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "age",
                        "familyId",
                        "createdAt",
                        "updatedAt"
                      ],
                      "title": "Child Response",
                      "description": "Complete child information with optional group memberships"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data or no update data provided"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Child does not exist"
          }
        }
      },
      "patch": {
        "tags": [
          "Children"
        ],
        "summary": "Update child (PATCH)",
        "description": "Partially update child information. Requires family admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "patchchildrenByChildId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique child identifier (CUID format)"
            },
            "required": true,
            "description": "Unique child identifier (CUID format)",
            "name": "childId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateChildRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Child updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Unique child identifier (CUID format)"
                        },
                        "name": {
                          "type": "string",
                          "example": "Emma Johnson",
                          "description": "Child full name"
                        },
                        "age": {
                          "type": "number",
                          "nullable": true,
                          "example": 8,
                          "description": "Child age (null if not specified)"
                        },
                        "familyId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901236",
                          "description": "Family identifier the child belongs to"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Child creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Last update timestamp"
                        },
                        "groupMemberships": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid"
                              },
                              "childId": {
                                "type": "string",
                                "format": "cuid"
                              },
                              "groupId": {
                                "type": "string",
                                "format": "cuid"
                              },
                              "joinedAt": {
                                "type": "string",
                                "format": "date-time"
                              },
                              "group": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid"
                                  },
                                  "name": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name"
                                ]
                              }
                            },
                            "required": [
                              "id",
                              "childId",
                              "groupId",
                              "joinedAt",
                              "group"
                            ]
                          },
                          "description": "Group memberships (included when fetching all children)"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "age",
                        "familyId",
                        "createdAt",
                        "updatedAt"
                      ],
                      "title": "Child Response",
                      "description": "Complete child information with optional group memberships"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data or no update data provided"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Child does not exist"
          }
        }
      },
      "delete": {
        "tags": [
          "Children"
        ],
        "summary": "Delete child",
        "description": "Remove a child from the family. Requires family admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "deletechildrenByChildId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique child identifier (CUID format)"
            },
            "required": true,
            "description": "Unique child identifier (CUID format)",
            "name": "childId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Child deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "enum": [
                            true
                          ]
                        },
                        "message": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "success",
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid child ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Child does not exist"
          }
        }
      }
    },
    "/children/{childId}/assignments": {
      "get": {
        "tags": [
          "Children"
        ],
        "summary": "Get child trip assignments",
        "description": "Retrieve all trip assignments for a specific child, optionally filtered by week",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getchildrenByChildIdAssignments",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique child identifier (CUID format)"
            },
            "required": true,
            "description": "Unique child identifier (CUID format)",
            "name": "childId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "example": "2023-W15",
              "description": "Week in ISO format (YYYY-W##) for filtering assignments"
            },
            "required": false,
            "description": "Week in ISO format (YYYY-W##) for filtering assignments",
            "name": "week",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Assignments retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901238",
                            "description": "Unique assignment identifier (CUID format)"
                          },
                          "childId": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901234",
                            "description": "Child identifier"
                          },
                          "tripDate": {
                            "type": "string",
                            "format": "date",
                            "example": "2023-04-15",
                            "description": "Date of the assigned trip"
                          },
                          "tripType": {
                            "type": "string",
                            "enum": [
                              "PICKUP",
                              "DROPOFF"
                            ],
                            "example": "PICKUP",
                            "description": "Type of trip assignment"
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "ASSIGNED",
                              "COMPLETED",
                              "CANCELLED"
                            ],
                            "example": "ASSIGNED",
                            "description": "Assignment status"
                          },
                          "group": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid"
                              },
                              "name": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name"
                            ],
                            "description": "Group information for the assignment"
                          }
                        },
                        "required": [
                          "id",
                          "childId",
                          "tripDate",
                          "tripType",
                          "status"
                        ],
                        "title": "Child Assignment",
                        "description": "Child trip assignment information"
                      }
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid child ID or week format"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Child not accessible"
          },
          "404": {
            "description": "Not found - Child does not exist"
          }
        }
      }
    },
    "/children/{childId}/groups/{groupId}": {
      "post": {
        "tags": [
          "Children"
        ],
        "summary": "Add child to group",
        "description": "Add a child to a group. Requires appropriate permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postchildrenByChildIdGroupsByGroupId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique child identifier (CUID format)"
            },
            "required": true,
            "description": "Unique child identifier (CUID format)",
            "name": "childId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901235",
              "description": "Unique group identifier (CUID format)"
            },
            "required": true,
            "description": "Unique group identifier (CUID format)",
            "name": "groupId",
            "in": "path"
          }
        ],
        "responses": {
          "201": {
            "description": "Child added to group successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901237",
                          "description": "Unique membership identifier (CUID format)"
                        },
                        "childId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Child identifier"
                        },
                        "groupId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901235",
                          "description": "Group identifier"
                        },
                        "joinedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "When the child joined the group"
                        },
                        "group": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid",
                              "example": "cl123456789012345678901235",
                              "description": "Group identifier"
                            },
                            "name": {
                              "type": "string",
                              "example": "Morning School Run",
                              "description": "Group name"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "description": "Group information (included when fetching memberships)"
                        }
                      },
                      "required": [
                        "id",
                        "childId",
                        "groupId",
                        "joinedAt"
                      ],
                      "title": "Child Group Membership",
                      "description": "Child membership in a group"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid child or group ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Child or group does not exist"
          },
          "409": {
            "description": "Conflict - Child already belongs to group"
          }
        }
      },
      "delete": {
        "tags": [
          "Children"
        ],
        "summary": "Remove child from group",
        "description": "Remove a child from a group. Requires appropriate permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "deletechildrenByChildIdGroupsByGroupId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique child identifier (CUID format)"
            },
            "required": true,
            "description": "Unique child identifier (CUID format)",
            "name": "childId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901235",
              "description": "Unique group identifier (CUID format)"
            },
            "required": true,
            "description": "Unique group identifier (CUID format)",
            "name": "groupId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Child removed from group successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "enum": [
                            true
                          ]
                        },
                        "message": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "success",
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid child or group ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Child or group does not exist or membership does not exist"
          }
        }
      }
    },
    "/children/{childId}/groups": {
      "get": {
        "tags": [
          "Children"
        ],
        "summary": "Get child group memberships",
        "description": "Retrieve all group memberships for a specific child",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getchildrenByChildIdGroups",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique child identifier (CUID format)"
            },
            "required": true,
            "description": "Unique child identifier (CUID format)",
            "name": "childId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Group memberships retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901237",
                            "description": "Unique membership identifier (CUID format)"
                          },
                          "childId": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901234",
                            "description": "Child identifier"
                          },
                          "groupId": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901235",
                            "description": "Group identifier"
                          },
                          "joinedAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2023-01-01T00:00:00.000Z",
                            "description": "When the child joined the group"
                          },
                          "group": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901235",
                                "description": "Group identifier"
                              },
                              "name": {
                                "type": "string",
                                "example": "Morning School Run",
                                "description": "Group name"
                              }
                            },
                            "required": [
                              "id",
                              "name"
                            ],
                            "description": "Group information (included when fetching memberships)"
                          }
                        },
                        "required": [
                          "id",
                          "childId",
                          "groupId",
                          "joinedAt"
                        ],
                        "title": "Child Group Membership",
                        "description": "Child membership in a group"
                      }
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid child ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Child not accessible"
          },
          "404": {
            "description": "Not found - Child does not exist"
          }
        }
      }
    },
    "/vehicles": {
      "post": {
        "tags": [
          "Vehicles"
        ],
        "summary": "Create a new vehicle",
        "description": "Add a new vehicle to the authenticated user family. Requires family admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postvehicles",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateVehicleRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Vehicle created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Unique vehicle identifier (CUID format)"
                        },
                        "name": {
                          "type": "string",
                          "example": "Honda Odyssey",
                          "description": "Vehicle name or model"
                        },
                        "capacity": {
                          "type": "integer",
                          "example": 7,
                          "description": "Vehicle seating capacity"
                        },
                        "familyId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901237",
                          "description": "Family identifier that owns the vehicle"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Vehicle creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Last update timestamp"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "capacity",
                        "familyId",
                        "createdAt",
                        "updatedAt"
                      ],
                      "title": "Vehicle Response",
                      "description": "Complete vehicle information"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data or capacity constraints"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions or no family"
          }
        }
      },
      "get": {
        "tags": [
          "Vehicles"
        ],
        "summary": "Get user vehicles",
        "description": "Retrieve all vehicles belonging to the authenticated user family",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getvehicles",
        "responses": {
          "200": {
            "description": "Vehicles retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901234",
                            "description": "Unique vehicle identifier (CUID format)"
                          },
                          "name": {
                            "type": "string",
                            "example": "Honda Odyssey",
                            "description": "Vehicle name or model"
                          },
                          "capacity": {
                            "type": "integer",
                            "example": 7,
                            "description": "Vehicle seating capacity"
                          },
                          "familyId": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901237",
                            "description": "Family identifier that owns the vehicle"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2023-01-01T00:00:00.000Z",
                            "description": "Vehicle creation timestamp"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2023-01-01T00:00:00.000Z",
                            "description": "Last update timestamp"
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "capacity",
                          "familyId",
                          "createdAt",
                          "updatedAt"
                        ],
                        "title": "Vehicle Response",
                        "description": "Complete vehicle information"
                      }
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - No family found"
          }
        }
      }
    },
    "/vehicles/available/{groupId}/{timeSlotId}": {
      "get": {
        "tags": [
          "Vehicles"
        ],
        "summary": "Get available vehicles",
        "description": "Retrieve available vehicles for a specific group and time slot combination",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getvehiclesAvailableByGroupIdByTimeSlotId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901235",
              "description": "Unique group identifier (CUID format)"
            },
            "required": true,
            "description": "Unique group identifier (CUID format)",
            "name": "groupId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901236",
              "description": "Unique time slot identifier (CUID format)"
            },
            "required": true,
            "description": "Unique time slot identifier (CUID format)",
            "name": "timeSlotId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Available vehicles retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901234",
                            "description": "Unique vehicle identifier (CUID format)"
                          },
                          "name": {
                            "type": "string",
                            "example": "Honda Odyssey",
                            "description": "Vehicle name or model"
                          },
                          "capacity": {
                            "type": "integer",
                            "example": 7,
                            "description": "Vehicle seating capacity"
                          },
                          "currentAssignments": {
                            "type": "integer",
                            "example": 3,
                            "description": "Number of children currently assigned to this vehicle for the time slot"
                          },
                          "availableSeats": {
                            "type": "integer",
                            "example": 4,
                            "description": "Number of available seats remaining"
                          },
                          "driverName": {
                            "type": "string",
                            "nullable": true,
                            "example": "John Doe",
                            "description": "Name of the assigned driver (if any)"
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "capacity",
                          "currentAssignments",
                          "availableSeats"
                        ],
                        "title": "Available Vehicle",
                        "description": "Vehicle information for availability checking with current assignment status"
                      }
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid group or time slot ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions for group"
          },
          "404": {
            "description": "Not found - Group or time slot does not exist"
          }
        }
      }
    },
    "/vehicles/{vehicleId}": {
      "get": {
        "tags": [
          "Vehicles"
        ],
        "summary": "Get specific vehicle",
        "description": "Retrieve detailed information about a specific vehicle by ID",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getvehiclesByVehicleId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique vehicle identifier (CUID format)"
            },
            "required": true,
            "description": "Unique vehicle identifier (CUID format)",
            "name": "vehicleId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Vehicle retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Unique vehicle identifier (CUID format)"
                        },
                        "name": {
                          "type": "string",
                          "example": "Honda Odyssey",
                          "description": "Vehicle name or model"
                        },
                        "capacity": {
                          "type": "integer",
                          "example": 7,
                          "description": "Vehicle seating capacity"
                        },
                        "familyId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901237",
                          "description": "Family identifier that owns the vehicle"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Vehicle creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Last update timestamp"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "capacity",
                        "familyId",
                        "createdAt",
                        "updatedAt"
                      ],
                      "title": "Vehicle Response",
                      "description": "Complete vehicle information"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid vehicle ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Vehicle not accessible"
          },
          "404": {
            "description": "Not found - Vehicle does not exist"
          }
        }
      },
      "patch": {
        "tags": [
          "Vehicles"
        ],
        "summary": "Update vehicle",
        "description": "Partially update vehicle information. Requires family admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "patchvehiclesByVehicleId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique vehicle identifier (CUID format)"
            },
            "required": true,
            "description": "Unique vehicle identifier (CUID format)",
            "name": "vehicleId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateVehicleRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Vehicle updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Unique vehicle identifier (CUID format)"
                        },
                        "name": {
                          "type": "string",
                          "example": "Honda Odyssey",
                          "description": "Vehicle name or model"
                        },
                        "capacity": {
                          "type": "integer",
                          "example": 7,
                          "description": "Vehicle seating capacity"
                        },
                        "familyId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901237",
                          "description": "Family identifier that owns the vehicle"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Vehicle creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Last update timestamp"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "capacity",
                        "familyId",
                        "createdAt",
                        "updatedAt"
                      ],
                      "title": "Vehicle Response",
                      "description": "Complete vehicle information"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data, capacity constraints, or capacity reduction conflicts"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Vehicle does not exist"
          }
        }
      },
      "delete": {
        "tags": [
          "Vehicles"
        ],
        "summary": "Delete vehicle",
        "description": "Remove a vehicle from the family. Requires family admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "deletevehiclesByVehicleId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique vehicle identifier (CUID format)"
            },
            "required": true,
            "description": "Unique vehicle identifier (CUID format)",
            "name": "vehicleId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Vehicle deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "enum": [
                            true
                          ]
                        },
                        "message": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "success",
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid vehicle ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Vehicle does not exist"
          }
        }
      }
    },
    "/vehicles/{vehicleId}/schedule": {
      "get": {
        "tags": [
          "Vehicles"
        ],
        "summary": "Get vehicle schedule",
        "description": "Retrieve schedule information for a specific vehicle, optionally filtered by week",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getvehiclesByVehicleIdSchedule",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique vehicle identifier (CUID format)"
            },
            "required": true,
            "description": "Unique vehicle identifier (CUID format)",
            "name": "vehicleId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "example": "2023-W15",
              "description": "Week in ISO format (YYYY-W##) for filtering vehicle schedule"
            },
            "required": false,
            "description": "Week in ISO format (YYYY-W##) for filtering vehicle schedule",
            "name": "week",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Vehicle schedule retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "vehicleId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Vehicle identifier"
                        },
                        "vehicleName": {
                          "type": "string",
                          "example": "Honda Odyssey",
                          "description": "Vehicle name"
                        },
                        "schedule": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "date": {
                                "type": "string",
                                "format": "date",
                                "example": "2023-04-15",
                                "description": "Date of the scheduled assignment"
                              },
                              "timeSlot": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid"
                                  },
                                  "name": {
                                    "type": "string"
                                  },
                                  "startTime": {
                                    "type": "string"
                                  },
                                  "endTime": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name",
                                  "startTime",
                                  "endTime"
                                ],
                                "description": "Time slot information"
                              },
                              "group": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid"
                                  },
                                  "name": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name"
                                ],
                                "description": "Group information"
                              },
                              "assignedChildren": {
                                "type": "integer",
                                "example": 3,
                                "description": "Number of children assigned to this vehicle for this slot"
                              },
                              "isDriver": {
                                "type": "boolean",
                                "example": true,
                                "description": "Whether the current user is driving for this assignment"
                              }
                            },
                            "required": [
                              "date",
                              "timeSlot",
                              "group",
                              "assignedChildren",
                              "isDriver"
                            ]
                          },
                          "description": "Vehicle schedule assignments"
                        }
                      },
                      "required": [
                        "vehicleId",
                        "vehicleName",
                        "schedule"
                      ],
                      "title": "Vehicle Schedule",
                      "description": "Vehicle schedule with trip assignments and driver information"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid vehicle ID or week format"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Vehicle not accessible"
          },
          "404": {
            "description": "Not found - Vehicle does not exist"
          }
        }
      }
    },
    "/groups/validate-invite": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Validate invitation code (public)",
        "description": "Validate a group invitation code without authentication",
        "operationId": "postgroupsValidateInvite",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ValidateInviteRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Invitation code validation result",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "valid": {
                          "type": "boolean",
                          "example": true,
                          "description": "Whether the invitation code is valid"
                        },
                        "error": {
                          "type": "string",
                          "example": "Invitation code is required",
                          "description": "Error message if invalid"
                        },
                        "group": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid"
                            },
                            "name": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "description": "Group information (if valid)"
                        },
                        "invitation": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid"
                            },
                            "expiresAt": {
                              "type": "string",
                              "format": "date-time"
                            },
                            "role": {
                              "type": "string",
                              "enum": [
                                "MEMBER",
                                "ADMIN",
                                "OWNER"
                              ],
                              "description": "Role of a family within a group (including special OWNER case)",
                              "example": "MEMBER"
                            }
                          },
                          "required": [
                            "id",
                            "expiresAt",
                            "role"
                          ],
                          "description": "Invitation information (if valid)"
                        },
                        "userStatus": {
                          "type": "string",
                          "enum": [
                            "NO_FAMILY",
                            "FAMILY_MEMBER",
                            "FAMILY_ADMIN",
                            "ALREADY_MEMBER"
                          ],
                          "description": "User family status (authenticated validation only)",
                          "example": "FAMILY_MEMBER"
                        },
                        "familyInfo": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid"
                            },
                            "name": {
                              "type": "string"
                            },
                            "role": {
                              "type": "string"
                            },
                            "adminName": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "name",
                            "role"
                          ],
                          "description": "User family information (authenticated validation only)"
                        },
                        "canAccept": {
                          "type": "boolean",
                          "example": true,
                          "description": "Whether user can accept invitation (authenticated validation only)"
                        },
                        "message": {
                          "type": "string",
                          "example": "You are ready to join this group",
                          "description": "Message for user (authenticated validation only)"
                        },
                        "actionRequired": {
                          "type": "string",
                          "enum": [
                            "CREATE_FAMILY",
                            "CONTACT_ADMIN",
                            "ALREADY_ACCEPTED",
                            "READY_TO_JOIN"
                          ],
                          "description": "Action required for user to join (authenticated validation only)",
                          "example": "READY_TO_JOIN"
                        }
                      },
                      "required": [
                        "valid"
                      ],
                      "title": "Invitation Validation Response",
                      "description": "Invitation code validation result"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid invitation code"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/groups/validate-invite-auth": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Validate invitation code (authenticated)",
        "description": "Validate a group invitation code with user context",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postgroupsValidateInviteAuth",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ValidateInviteRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Invitation code validation result with user context",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "valid": {
                          "type": "boolean",
                          "example": true,
                          "description": "Whether the invitation code is valid"
                        },
                        "error": {
                          "type": "string",
                          "example": "Invitation code is required",
                          "description": "Error message if invalid"
                        },
                        "group": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid"
                            },
                            "name": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "description": "Group information (if valid)"
                        },
                        "invitation": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid"
                            },
                            "expiresAt": {
                              "type": "string",
                              "format": "date-time"
                            },
                            "role": {
                              "type": "string",
                              "enum": [
                                "MEMBER",
                                "ADMIN",
                                "OWNER"
                              ],
                              "description": "Role of a family within a group (including special OWNER case)",
                              "example": "MEMBER"
                            }
                          },
                          "required": [
                            "id",
                            "expiresAt",
                            "role"
                          ],
                          "description": "Invitation information (if valid)"
                        },
                        "userStatus": {
                          "type": "string",
                          "enum": [
                            "NO_FAMILY",
                            "FAMILY_MEMBER",
                            "FAMILY_ADMIN",
                            "ALREADY_MEMBER"
                          ],
                          "description": "User family status (authenticated validation only)",
                          "example": "FAMILY_MEMBER"
                        },
                        "familyInfo": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid"
                            },
                            "name": {
                              "type": "string"
                            },
                            "role": {
                              "type": "string"
                            },
                            "adminName": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "name",
                            "role"
                          ],
                          "description": "User family information (authenticated validation only)"
                        },
                        "canAccept": {
                          "type": "boolean",
                          "example": true,
                          "description": "Whether user can accept invitation (authenticated validation only)"
                        },
                        "message": {
                          "type": "string",
                          "example": "You are ready to join this group",
                          "description": "Message for user (authenticated validation only)"
                        },
                        "actionRequired": {
                          "type": "string",
                          "enum": [
                            "CREATE_FAMILY",
                            "CONTACT_ADMIN",
                            "ALREADY_ACCEPTED",
                            "READY_TO_JOIN"
                          ],
                          "description": "Action required for user to join (authenticated validation only)",
                          "example": "READY_TO_JOIN"
                        }
                      },
                      "required": [
                        "valid"
                      ],
                      "title": "Invitation Validation Response",
                      "description": "Invitation code validation result"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid invitation code"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/groups": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Create group",
        "description": "Create a new group. Requires family admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postgroups",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGroupRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Group created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Unique group identifier (CUID format)"
                        },
                        "name": {
                          "type": "string",
                          "example": "Morning School Run",
                          "description": "Group display name"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true,
                          "example": "Carpool group for morning school transportation",
                          "description": "Group description (null if not set)"
                        },
                        "familyId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901236",
                          "description": "Owner family identifier"
                        },
                        "inviteCode": {
                          "type": "string",
                          "example": "ABC123XYZ",
                          "description": "Group invitation code"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Group creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Last update timestamp"
                        },
                        "userRole": {
                          "type": "string",
                          "enum": [
                            "ADMIN",
                            "MEMBER"
                          ],
                          "description": "Current user's role in this group",
                          "example": "ADMIN"
                        },
                        "ownerFamily": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid",
                              "example": "cl123456789012345678901236",
                              "description": "Owner family identifier"
                            },
                            "name": {
                              "type": "string",
                              "example": "Johnson Family",
                              "description": "Owner family name"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "title": "Owner Family",
                          "description": "Owner family information"
                        },
                        "_count": {
                          "type": "object",
                          "properties": {
                            "familyMembers": {
                              "type": "number",
                              "example": 3,
                              "description": "Number of families in the group"
                            }
                          },
                          "required": [
                            "familyMembers"
                          ],
                          "description": "Count information (included in some responses)"
                        },
                        "familyCount": {
                          "type": "number",
                          "example": 3,
                          "description": "Total number of families in the group"
                        },
                        "familyMembers": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901237",
                                "description": "Family member identifier"
                              },
                              "familyId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901238",
                                "description": "Family identifier"
                              },
                              "role": {
                                "type": "string",
                                "enum": [
                                  "MEMBER",
                                  "ADMIN",
                                  "OWNER"
                                ],
                                "description": "Family role in the group",
                                "example": "MEMBER"
                              },
                              "joinedAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "When the family joined the group"
                              },
                              "family": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid"
                                  },
                                  "name": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name"
                                ],
                                "description": "Family information (included when fetching group families)"
                              }
                            },
                            "required": [
                              "id",
                              "familyId",
                              "role",
                              "joinedAt"
                            ],
                            "title": "Family Group Member",
                            "description": "Family membership in a group"
                          },
                          "description": "Family members (included when fetching group families)"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "description",
                        "familyId",
                        "inviteCode",
                        "createdAt",
                        "updatedAt",
                        "userRole",
                        "ownerFamily",
                        "familyCount"
                      ],
                      "title": "Group Response",
                      "description": "Complete group information with user context"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data or insufficient permissions"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions or no family"
          }
        }
      }
    },
    "/groups/join": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Join group by invite code",
        "description": "Join a group using an invitation code",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postgroupsJoin",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/JoinGroupRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Group joined successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Unique group identifier (CUID format)"
                        },
                        "name": {
                          "type": "string",
                          "example": "Morning School Run",
                          "description": "Group display name"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true,
                          "example": "Carpool group for morning school transportation",
                          "description": "Group description (null if not set)"
                        },
                        "familyId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901236",
                          "description": "Owner family identifier"
                        },
                        "inviteCode": {
                          "type": "string",
                          "example": "ABC123XYZ",
                          "description": "Group invitation code"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Group creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Last update timestamp"
                        },
                        "userRole": {
                          "type": "string",
                          "enum": [
                            "ADMIN",
                            "MEMBER"
                          ],
                          "description": "Current user's role in this group",
                          "example": "ADMIN"
                        },
                        "ownerFamily": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid",
                              "example": "cl123456789012345678901236",
                              "description": "Owner family identifier"
                            },
                            "name": {
                              "type": "string",
                              "example": "Johnson Family",
                              "description": "Owner family name"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "title": "Owner Family",
                          "description": "Owner family information"
                        },
                        "_count": {
                          "type": "object",
                          "properties": {
                            "familyMembers": {
                              "type": "number",
                              "example": 3,
                              "description": "Number of families in the group"
                            }
                          },
                          "required": [
                            "familyMembers"
                          ],
                          "description": "Count information (included in some responses)"
                        },
                        "familyCount": {
                          "type": "number",
                          "example": 3,
                          "description": "Total number of families in the group"
                        },
                        "familyMembers": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901237",
                                "description": "Family member identifier"
                              },
                              "familyId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901238",
                                "description": "Family identifier"
                              },
                              "role": {
                                "type": "string",
                                "enum": [
                                  "MEMBER",
                                  "ADMIN",
                                  "OWNER"
                                ],
                                "description": "Family role in the group",
                                "example": "MEMBER"
                              },
                              "joinedAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "When the family joined the group"
                              },
                              "family": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid"
                                  },
                                  "name": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name"
                                ],
                                "description": "Family information (included when fetching group families)"
                              }
                            },
                            "required": [
                              "id",
                              "familyId",
                              "role",
                              "joinedAt"
                            ],
                            "title": "Family Group Member",
                            "description": "Family membership in a group"
                          },
                          "description": "Family members (included when fetching group families)"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "description",
                        "familyId",
                        "inviteCode",
                        "createdAt",
                        "updatedAt",
                        "userRole",
                        "ownerFamily",
                        "familyCount"
                      ],
                      "title": "Group Response",
                      "description": "Complete group information with user context"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ],
                  "title": "Group Success Response",
                  "description": "Successful group operation response"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid invite code or already member"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          }
        }
      }
    },
    "/groups/my-groups": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Get user groups",
        "description": "Retrieve all groups the authenticated user belongs to",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getgroupsMyGroups",
        "responses": {
          "200": {
            "description": "Groups retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901234",
                            "description": "Unique group identifier (CUID format)"
                          },
                          "name": {
                            "type": "string",
                            "example": "Morning School Run",
                            "description": "Group display name"
                          },
                          "description": {
                            "type": "string",
                            "nullable": true,
                            "example": "Carpool group for morning school transportation",
                            "description": "Group description (null if not set)"
                          },
                          "familyId": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901236",
                            "description": "Owner family identifier"
                          },
                          "inviteCode": {
                            "type": "string",
                            "example": "ABC123XYZ",
                            "description": "Group invitation code"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2023-01-01T00:00:00.000Z",
                            "description": "Group creation timestamp"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2023-01-01T00:00:00.000Z",
                            "description": "Last update timestamp"
                          },
                          "userRole": {
                            "type": "string",
                            "enum": [
                              "ADMIN",
                              "MEMBER"
                            ],
                            "description": "Current user's role in this group",
                            "example": "ADMIN"
                          },
                          "ownerFamily": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901236",
                                "description": "Owner family identifier"
                              },
                              "name": {
                                "type": "string",
                                "example": "Johnson Family",
                                "description": "Owner family name"
                              }
                            },
                            "required": [
                              "id",
                              "name"
                            ],
                            "title": "Owner Family",
                            "description": "Owner family information"
                          },
                          "_count": {
                            "type": "object",
                            "properties": {
                              "familyMembers": {
                                "type": "number",
                                "example": 3,
                                "description": "Number of families in the group"
                              }
                            },
                            "required": [
                              "familyMembers"
                            ],
                            "description": "Count information (included in some responses)"
                          },
                          "familyCount": {
                            "type": "number",
                            "example": 3,
                            "description": "Total number of families in the group"
                          },
                          "familyMembers": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "cuid",
                                  "example": "cl123456789012345678901237",
                                  "description": "Family member identifier"
                                },
                                "familyId": {
                                  "type": "string",
                                  "format": "cuid",
                                  "example": "cl123456789012345678901238",
                                  "description": "Family identifier"
                                },
                                "role": {
                                  "type": "string",
                                  "enum": [
                                    "MEMBER",
                                    "ADMIN",
                                    "OWNER"
                                  ],
                                  "description": "Family role in the group",
                                  "example": "MEMBER"
                                },
                                "joinedAt": {
                                  "type": "string",
                                  "format": "date-time",
                                  "example": "2023-01-01T00:00:00.000Z",
                                  "description": "When the family joined the group"
                                },
                                "family": {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "string",
                                      "format": "cuid"
                                    },
                                    "name": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "name"
                                  ],
                                  "description": "Family information (included when fetching group families)"
                                }
                              },
                              "required": [
                                "id",
                                "familyId",
                                "role",
                                "joinedAt"
                              ],
                              "title": "Family Group Member",
                              "description": "Family membership in a group"
                            },
                            "description": "Family members (included when fetching group families)"
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "description",
                          "familyId",
                          "inviteCode",
                          "createdAt",
                          "updatedAt",
                          "userRole",
                          "ownerFamily",
                          "familyCount"
                        ],
                        "title": "Group Response",
                        "description": "Complete group information with user context"
                      }
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          }
        }
      }
    },
    "/groups/{groupId}/families": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Get group families",
        "description": "Retrieve all families in a group. Requires group membership.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getgroupsByGroupIdFamilies",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique group identifier (CUID format)"
            },
            "required": true,
            "description": "Unique group identifier (CUID format)",
            "name": "groupId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Group families retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901237",
                            "description": "Family identifier"
                          },
                          "name": {
                            "type": "string",
                            "example": "Johnson Family",
                            "description": "Family name"
                          },
                          "role": {
                            "type": "string",
                            "enum": [
                              "MEMBER",
                              "ADMIN",
                              "OWNER"
                            ],
                            "description": "Family role in the group",
                            "example": "MEMBER"
                          },
                          "isMyFamily": {
                            "type": "boolean",
                            "example": false,
                            "description": "Whether this is the requester's family"
                          },
                          "canManage": {
                            "type": "boolean",
                            "example": false,
                            "description": "Whether the requester can manage this family"
                          },
                          "admins": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "name": {
                                  "type": "string"
                                },
                                "email": {
                                  "type": "string",
                                  "format": "email"
                                }
                              },
                              "required": [
                                "name",
                                "email"
                              ]
                            },
                            "description": "Family admin contacts",
                            "example": [
                              {
                                "name": "John Johnson",
                                "email": "john@example.com"
                              }
                            ]
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "role",
                          "isMyFamily",
                          "canManage",
                          "admins"
                        ],
                        "title": "Group Family",
                        "description": "Family information for group families endpoint"
                      }
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ],
                  "title": "Group Families Response",
                  "description": "Response for get group families endpoint"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid group ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Not a group member"
          },
          "404": {
            "description": "Not found - Group does not exist"
          }
        }
      }
    },
    "/groups/{groupId}": {
      "patch": {
        "tags": [
          "Groups"
        ],
        "summary": "Update group (PATCH)",
        "description": "Update group information. Requires group admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "patchgroupsByGroupId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique group identifier (CUID format)"
            },
            "required": true,
            "description": "Unique group identifier (CUID format)",
            "name": "groupId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateGroupRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Group updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Unique group identifier (CUID format)"
                        },
                        "name": {
                          "type": "string",
                          "example": "Morning School Run",
                          "description": "Group display name"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true,
                          "example": "Carpool group for morning school transportation",
                          "description": "Group description (null if not set)"
                        },
                        "familyId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901236",
                          "description": "Owner family identifier"
                        },
                        "inviteCode": {
                          "type": "string",
                          "example": "ABC123XYZ",
                          "description": "Group invitation code"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Group creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Last update timestamp"
                        },
                        "userRole": {
                          "type": "string",
                          "enum": [
                            "ADMIN",
                            "MEMBER"
                          ],
                          "description": "Current user's role in this group",
                          "example": "ADMIN"
                        },
                        "ownerFamily": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid",
                              "example": "cl123456789012345678901236",
                              "description": "Owner family identifier"
                            },
                            "name": {
                              "type": "string",
                              "example": "Johnson Family",
                              "description": "Owner family name"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "title": "Owner Family",
                          "description": "Owner family information"
                        },
                        "_count": {
                          "type": "object",
                          "properties": {
                            "familyMembers": {
                              "type": "number",
                              "example": 3,
                              "description": "Number of families in the group"
                            }
                          },
                          "required": [
                            "familyMembers"
                          ],
                          "description": "Count information (included in some responses)"
                        },
                        "familyCount": {
                          "type": "number",
                          "example": 3,
                          "description": "Total number of families in the group"
                        },
                        "familyMembers": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901237",
                                "description": "Family member identifier"
                              },
                              "familyId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901238",
                                "description": "Family identifier"
                              },
                              "role": {
                                "type": "string",
                                "enum": [
                                  "MEMBER",
                                  "ADMIN",
                                  "OWNER"
                                ],
                                "description": "Family role in the group",
                                "example": "MEMBER"
                              },
                              "joinedAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "When the family joined the group"
                              },
                              "family": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid"
                                  },
                                  "name": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name"
                                ],
                                "description": "Family information (included when fetching group families)"
                              }
                            },
                            "required": [
                              "id",
                              "familyId",
                              "role",
                              "joinedAt"
                            ],
                            "title": "Family Group Member",
                            "description": "Family membership in a group"
                          },
                          "description": "Family members (included when fetching group families)"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "description",
                        "familyId",
                        "inviteCode",
                        "createdAt",
                        "updatedAt",
                        "userRole",
                        "ownerFamily",
                        "familyCount"
                      ],
                      "title": "Group Response",
                      "description": "Complete group information with user context"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data or no update data provided"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Group does not exist"
          }
        }
      },
      "delete": {
        "tags": [
          "Groups"
        ],
        "summary": "Delete group",
        "description": "Delete a group. Requires group admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "deletegroupsByGroupId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique group identifier (CUID format)"
            },
            "required": true,
            "description": "Unique group identifier (CUID format)",
            "name": "groupId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Group deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "enum": [
                            true
                          ]
                        },
                        "message": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "success",
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid group ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Group does not exist"
          }
        }
      }
    },
    "/groups/{groupId}/leave": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Leave group",
        "description": "Leave a group as a family member",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postgroupsByGroupIdLeave",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique group identifier (CUID format)"
            },
            "required": true,
            "description": "Unique group identifier (CUID format)",
            "name": "groupId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Group left successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "enum": [
                            true
                          ]
                        },
                        "message": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "success",
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid group ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Not a group member or cannot leave (owner)"
          },
          "404": {
            "description": "Not found - Group does not exist"
          }
        }
      }
    },
    "/groups/{groupId}/families/{familyId}/role": {
      "patch": {
        "tags": [
          "Groups"
        ],
        "summary": "Update family role",
        "description": "Update a family role within a group. Requires group admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "patchgroupsByGroupIdFamiliesByFamilyIdRole",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique group identifier (CUID format)"
            },
            "required": true,
            "description": "Unique group identifier (CUID format)",
            "name": "groupId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901236",
              "description": "Unique family identifier (CUID format)"
            },
            "required": true,
            "description": "Unique family identifier (CUID format)",
            "name": "familyId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateFamilyRoleRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Family role updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901237",
                          "description": "Family member identifier"
                        },
                        "familyId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901238",
                          "description": "Family identifier"
                        },
                        "role": {
                          "type": "string",
                          "enum": [
                            "MEMBER",
                            "ADMIN",
                            "OWNER"
                          ],
                          "description": "Family role in the group",
                          "example": "MEMBER"
                        },
                        "joinedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "When the family joined the group"
                        },
                        "family": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid"
                            },
                            "name": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "description": "Family information (included when fetching group families)"
                        }
                      },
                      "required": [
                        "id",
                        "familyId",
                        "role",
                        "joinedAt"
                      ],
                      "title": "Family Group Member",
                      "description": "Family membership in a group"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data or IDs"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Group, family, or membership does not exist"
          }
        }
      }
    },
    "/groups/{groupId}/families/{familyId}": {
      "delete": {
        "tags": [
          "Groups"
        ],
        "summary": "Remove family from group",
        "description": "Remove a family from a group. Requires group admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "deletegroupsByGroupIdFamiliesByFamilyId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique group identifier (CUID format)"
            },
            "required": true,
            "description": "Unique group identifier (CUID format)",
            "name": "groupId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901236",
              "description": "Unique family identifier (CUID format)"
            },
            "required": true,
            "description": "Unique family identifier (CUID format)",
            "name": "familyId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Family removed from group successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "enum": [
                            true
                          ]
                        },
                        "message": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "success",
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid group or family ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Group, family, or membership does not exist"
          }
        }
      }
    },
    "/groups/{groupId}/search-families": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Search families for invitation",
        "description": "Search for families to invite to the group. Requires group admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postgroupsByGroupIdSearchFamilies",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique group identifier (CUID format)"
            },
            "required": true,
            "description": "Unique group identifier (CUID format)",
            "name": "groupId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SearchFamiliesRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Families found successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901238",
                            "description": "Family identifier"
                          },
                          "name": {
                            "type": "string",
                            "example": "Smith Family",
                            "description": "Family name"
                          },
                          "adminContacts": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "name": {
                                  "type": "string",
                                  "example": "John Smith",
                                  "description": "Admin contact name"
                                },
                                "email": {
                                  "type": "string",
                                  "format": "email",
                                  "example": "john.smith@example.com",
                                  "description": "Admin contact email"
                                }
                              },
                              "required": [
                                "name",
                                "email"
                              ]
                            },
                            "description": "Family admin contacts for invitations"
                          },
                          "memberCount": {
                            "type": "number",
                            "example": 4,
                            "description": "Number of members in the family"
                          },
                          "canInvite": {
                            "type": "boolean",
                            "example": true,
                            "description": "Whether this family can be invited"
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "adminContacts",
                          "memberCount",
                          "canInvite"
                        ],
                        "title": "Family Search Result",
                        "description": "Family search result for invitations"
                      }
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid search term or group ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Group does not exist"
          }
        }
      }
    },
    "/groups/{groupId}/invite": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Invite family to group",
        "description": "Invite a family to join the group. Requires group admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postgroupsByGroupIdInvite",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique group identifier (CUID format)"
            },
            "required": true,
            "description": "Unique group identifier (CUID format)",
            "name": "groupId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InviteFamilyRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Family invited successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901239",
                          "description": "Invitation identifier"
                        },
                        "groupId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Group identifier"
                        },
                        "targetFamilyId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901238",
                          "description": "Target family identifier"
                        },
                        "role": {
                          "type": "string",
                          "enum": [
                            "MEMBER",
                            "ADMIN",
                            "OWNER"
                          ],
                          "description": "Invited role in the group",
                          "example": "MEMBER"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "PENDING",
                            "ACCEPTED",
                            "EXPIRED",
                            "CANCELLED"
                          ],
                          "example": "PENDING",
                          "description": "Invitation status"
                        },
                        "personalMessage": {
                          "type": "string",
                          "nullable": true,
                          "example": "Looking forward to carpooling with you!",
                          "description": "Personal message from inviter"
                        },
                        "expiresAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-08T00:00:00.000Z",
                          "description": "Invitation expiration timestamp"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Invitation creation timestamp"
                        },
                        "group": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid"
                            },
                            "name": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "description": "Group information (included in some responses)"
                        },
                        "targetFamily": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid"
                            },
                            "name": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "description": "Target family information (included in some responses)"
                        }
                      },
                      "required": [
                        "id",
                        "groupId",
                        "targetFamilyId",
                        "role",
                        "status",
                        "expiresAt",
                        "createdAt"
                      ],
                      "title": "Group Invitation",
                      "description": "Group invitation information"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data or family already invited"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Group or family does not exist"
          }
        }
      }
    },
    "/groups/{groupId}/invitations": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Get pending invitations",
        "description": "Retrieve all pending invitations for a group. Requires group admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getgroupsByGroupIdInvitations",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique group identifier (CUID format)"
            },
            "required": true,
            "description": "Unique group identifier (CUID format)",
            "name": "groupId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Pending invitations retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901239",
                            "description": "Invitation identifier"
                          },
                          "groupId": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901234",
                            "description": "Group identifier"
                          },
                          "targetFamilyId": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901238",
                            "description": "Target family identifier"
                          },
                          "role": {
                            "type": "string",
                            "enum": [
                              "MEMBER",
                              "ADMIN",
                              "OWNER"
                            ],
                            "description": "Invited role in the group",
                            "example": "MEMBER"
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "PENDING",
                              "ACCEPTED",
                              "EXPIRED",
                              "CANCELLED"
                            ],
                            "example": "PENDING",
                            "description": "Invitation status"
                          },
                          "personalMessage": {
                            "type": "string",
                            "nullable": true,
                            "example": "Looking forward to carpooling with you!",
                            "description": "Personal message from inviter"
                          },
                          "expiresAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2023-01-08T00:00:00.000Z",
                            "description": "Invitation expiration timestamp"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2023-01-01T00:00:00.000Z",
                            "description": "Invitation creation timestamp"
                          },
                          "group": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid"
                              },
                              "name": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name"
                            ],
                            "description": "Group information (included in some responses)"
                          },
                          "targetFamily": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid"
                              },
                              "name": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name"
                            ],
                            "description": "Target family information (included in some responses)"
                          }
                        },
                        "required": [
                          "id",
                          "groupId",
                          "targetFamilyId",
                          "role",
                          "status",
                          "expiresAt",
                          "createdAt"
                        ],
                        "title": "Group Invitation",
                        "description": "Group invitation information"
                      }
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid group ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Group does not exist"
          }
        }
      }
    },
    "/groups/{groupId}/invitations/{invitationId}": {
      "delete": {
        "tags": [
          "Groups"
        ],
        "summary": "Cancel invitation",
        "description": "Cancel a pending group invitation. Requires group admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "deletegroupsByGroupIdInvitationsByInvitationId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique group identifier (CUID format)"
            },
            "required": true,
            "description": "Unique group identifier (CUID format)",
            "name": "groupId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901235",
              "description": "Unique invitation identifier (CUID format)"
            },
            "required": true,
            "description": "Unique invitation identifier (CUID format)",
            "name": "invitationId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Invitation cancelled successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "enum": [
                            true
                          ]
                        },
                        "message": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "success",
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid group or invitation ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Group or invitation does not exist"
          }
        }
      }
    },
    "/groups/schedule-config/default": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Get default schedule hours",
        "description": "Retrieve default schedule hours configuration",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getgroupsScheduleConfigDefault",
        "responses": {
          "200": {
            "description": "Default schedule hours retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "scheduleHours": {
                          "type": "object",
                          "additionalProperties": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          },
                          "example": {
                            "MONDAY": [
                              "07:00",
                              "07:30",
                              "08:00",
                              "08:30",
                              "15:00",
                              "15:30",
                              "16:00",
                              "16:30"
                            ],
                            "FRIDAY": [
                              "07:00",
                              "07:30",
                              "08:00",
                              "08:30",
                              "15:00",
                              "15:30",
                              "16:00",
                              "16:30"
                            ]
                          },
                          "description": "Default schedule hours by day of week"
                        },
                        "isDefault": {
                          "type": "boolean",
                          "enum": [
                            true
                          ],
                          "description": "Always true for default schedule"
                        }
                      },
                      "required": [
                        "scheduleHours",
                        "isDefault"
                      ],
                      "title": "Default Schedule Response",
                      "description": "Default schedule configuration"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          }
        }
      }
    },
    "/groups/{groupId}/schedule-config": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Get group schedule configuration",
        "description": "Retrieve schedule configuration for a group. Requires group membership.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getgroupsByGroupIdScheduleConfig",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique group identifier (CUID format)"
            },
            "required": true,
            "description": "Unique group identifier (CUID format)",
            "name": "groupId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Group schedule configuration retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901240",
                          "description": "Schedule configuration identifier"
                        },
                        "groupId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Group identifier"
                        },
                        "scheduleHours": {
                          "type": "object",
                          "additionalProperties": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          },
                          "example": {
                            "MONDAY": [
                              "07:00",
                              "07:30",
                              "08:00",
                              "15:00",
                              "15:30",
                              "16:00"
                            ],
                            "FRIDAY": [
                              "07:00",
                              "07:30",
                              "08:00",
                              "15:00",
                              "16:00"
                            ]
                          },
                          "description": "Schedule hours by day of week (HH:MM format)"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Configuration creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Configuration update timestamp"
                        },
                        "isDefault": {
                          "type": "boolean",
                          "example": false,
                          "description": "Whether this is default configuration"
                        }
                      },
                      "required": [
                        "id",
                        "groupId",
                        "scheduleHours",
                        "createdAt",
                        "updatedAt"
                      ],
                      "title": "Group Schedule Configuration",
                      "description": "Group schedule configuration"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid group ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Not a group member"
          },
          "404": {
            "description": "Not found - Group or configuration does not exist"
          }
        }
      },
      "put": {
        "tags": [
          "Groups"
        ],
        "summary": "Update group schedule configuration",
        "description": "Update schedule configuration for a group. Requires group admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "putgroupsByGroupIdScheduleConfig",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique group identifier (CUID format)"
            },
            "required": true,
            "description": "Unique group identifier (CUID format)",
            "name": "groupId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateScheduleConfigRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Group schedule configuration updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901240",
                          "description": "Schedule configuration identifier"
                        },
                        "groupId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Group identifier"
                        },
                        "scheduleHours": {
                          "type": "object",
                          "additionalProperties": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          },
                          "example": {
                            "MONDAY": [
                              "07:00",
                              "07:30",
                              "08:00",
                              "15:00",
                              "15:30",
                              "16:00"
                            ],
                            "FRIDAY": [
                              "07:00",
                              "07:30",
                              "08:00",
                              "15:00",
                              "16:00"
                            ]
                          },
                          "description": "Schedule hours by day of week (HH:MM format)"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Configuration creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Configuration update timestamp"
                        },
                        "isDefault": {
                          "type": "boolean",
                          "example": false,
                          "description": "Whether this is default configuration"
                        }
                      },
                      "required": [
                        "id",
                        "groupId",
                        "scheduleHours",
                        "createdAt",
                        "updatedAt"
                      ],
                      "title": "Group Schedule Configuration",
                      "description": "Group schedule configuration"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data or group ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Group does not exist"
          }
        }
      }
    },
    "/groups/{groupId}/schedule-config/time-slots": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Get time slots for weekday",
        "description": "Retrieve available time slots for a specific weekday. Requires group membership.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getgroupsByGroupIdScheduleConfigTimeSlots",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique group identifier (CUID format)"
            },
            "required": true,
            "description": "Unique group identifier (CUID format)",
            "name": "groupId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "MONDAY",
                "TUESDAY",
                "WEDNESDAY",
                "THURSDAY",
                "FRIDAY",
                "SATURDAY",
                "SUNDAY"
              ],
              "description": "Day of the week to get time slots for",
              "example": "MONDAY"
            },
            "required": true,
            "description": "Day of the week to get time slots for",
            "name": "weekday",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Time slots retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "groupId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Group identifier"
                        },
                        "weekday": {
                          "type": "string",
                          "enum": [
                            "MONDAY",
                            "TUESDAY",
                            "WEDNESDAY",
                            "THURSDAY",
                            "FRIDAY",
                            "SATURDAY",
                            "SUNDAY"
                          ],
                          "description": "Day of the week",
                          "example": "MONDAY"
                        },
                        "timeSlots": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "example": [
                            "07:00",
                            "07:30",
                            "08:00",
                            "15:00",
                            "15:30",
                            "16:00"
                          ],
                          "description": "Available time slots for the weekday"
                        }
                      },
                      "required": [
                        "groupId",
                        "weekday",
                        "timeSlots"
                      ],
                      "title": "Time Slots Response",
                      "description": "Time slots for a specific weekday"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid group ID or weekday"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Not a group member"
          },
          "404": {
            "description": "Not found - Group does not exist"
          }
        }
      }
    },
    "/groups/{groupId}/schedule-config/reset": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Reset group schedule configuration",
        "description": "Reset group schedule configuration to default. Requires group admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postgroupsByGroupIdScheduleConfigReset",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique group identifier (CUID format)"
            },
            "required": true,
            "description": "Unique group identifier (CUID format)",
            "name": "groupId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Group schedule configuration reset successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901240",
                          "description": "Schedule configuration identifier"
                        },
                        "groupId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Group identifier"
                        },
                        "scheduleHours": {
                          "type": "object",
                          "additionalProperties": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          },
                          "example": {
                            "MONDAY": [
                              "07:00",
                              "07:30",
                              "08:00",
                              "15:00",
                              "15:30",
                              "16:00"
                            ],
                            "FRIDAY": [
                              "07:00",
                              "07:30",
                              "08:00",
                              "15:00",
                              "16:00"
                            ]
                          },
                          "description": "Schedule hours by day of week (HH:MM format)"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Configuration creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Configuration update timestamp"
                        },
                        "isDefault": {
                          "type": "boolean",
                          "example": false,
                          "description": "Whether this is default configuration"
                        }
                      },
                      "required": [
                        "id",
                        "groupId",
                        "scheduleHours",
                        "createdAt",
                        "updatedAt"
                      ],
                      "title": "Group Schedule Configuration",
                      "description": "Group schedule configuration"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid group ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Group does not exist"
          }
        }
      }
    },
    "/groups/{groupId}/schedule": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Get group schedule",
        "description": "Retrieve schedule for a group with optional date range filtering. Requires group membership.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getgroupsByGroupIdSchedule",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique group identifier (CUID format)"
            },
            "required": true,
            "description": "Unique group identifier (CUID format)",
            "name": "groupId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Group schedule retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "scheduleSlots": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "datetime": {
                                "type": "string"
                              },
                              "vehicle": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "name": {
                                    "type": "string"
                                  },
                                  "capacity": {
                                    "type": "number"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name",
                                  "capacity"
                                ]
                              },
                              "driver": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "name": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name"
                                ]
                              }
                            },
                            "required": [
                              "id",
                              "datetime"
                            ]
                          }
                        }
                      },
                      "required": [
                        "scheduleSlots"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid parameters"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Group does not exist"
          }
        }
      }
    },
    "/groups/{groupId}/schedule-slots": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Create schedule slot for group",
        "description": "Create a new schedule slot with vehicle for a group. Requires group membership.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postgroupsByGroupIdScheduleSlots",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique group identifier (CUID format)"
            },
            "required": true,
            "description": "Unique group identifier (CUID format)",
            "name": "groupId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "datetime": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "vehicleId": {
                    "type": "string",
                    "format": "cuid"
                  },
                  "driverId": {
                    "type": "string",
                    "format": "cuid"
                  },
                  "seatOverride": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 8
                  }
                },
                "required": [
                  "datetime",
                  "vehicleId"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Schedule slot created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "datetime": {
                          "type": "string"
                        },
                        "groupId": {
                          "type": "string"
                        },
                        "vehicleId": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "datetime",
                        "groupId",
                        "vehicleId"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid parameters"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Group does not exist"
          }
        }
      }
    },
    "/families/validate-invite": {
      "post": {
        "tags": [
          "Families"
        ],
        "summary": "Validate family invite code (public)",
        "description": "Validate a family invitation code without authentication",
        "operationId": "postfamiliesValidateInvite",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ValidateInviteCodeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Invite code validation result",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "valid": {
                          "type": "boolean",
                          "example": true,
                          "description": "Whether the invitation code is valid"
                        },
                        "family": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid",
                              "example": "cl123456789012345678901234",
                              "description": "Family identifier (if valid)"
                            },
                            "name": {
                              "type": "string",
                              "example": "Johnson Family",
                              "description": "Family name (if valid)"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "description": "Family information (if valid)"
                        }
                      },
                      "required": [
                        "valid"
                      ],
                      "title": "Invite Code Validation Response",
                      "description": "Invitation code validation result"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid invite code",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "valid": {
                          "type": "boolean",
                          "enum": [
                            false
                          ]
                        }
                      },
                      "required": [
                        "valid"
                      ]
                    },
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/families": {
      "post": {
        "tags": [
          "Families"
        ],
        "summary": "Create family",
        "description": "Create a new family",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postfamilies",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateFamilyRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Family created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Unique family identifier (CUID format)"
                        },
                        "name": {
                          "type": "string",
                          "example": "Johnson Family",
                          "description": "Family display name"
                        },
                        "inviteCode": {
                          "type": "string",
                          "nullable": true,
                          "example": null,
                          "description": "Family invite code (deprecated - using unified invitation system)"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Family creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Family update timestamp"
                        },
                        "members": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901238",
                                "description": "Family member identifier"
                              },
                              "familyId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901234",
                                "description": "Family identifier"
                              },
                              "userId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901237",
                                "description": "User identifier"
                              },
                              "role": {
                                "type": "string",
                                "enum": [
                                  "ADMIN",
                                  "MEMBER"
                                ],
                                "description": "Member role in the family",
                                "example": "ADMIN"
                              },
                              "joinedAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "When the member joined the family"
                              },
                              "user": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid",
                                    "example": "cl123456789012345678901237",
                                    "description": "User identifier"
                                  },
                                  "email": {
                                    "type": "string",
                                    "format": "email",
                                    "example": "john.smith@example.com",
                                    "description": "User email address"
                                  },
                                  "name": {
                                    "type": "string",
                                    "example": "John Smith",
                                    "description": "User display name"
                                  }
                                },
                                "required": [
                                  "id",
                                  "email",
                                  "name"
                                ],
                                "title": "User",
                                "description": "User information"
                              }
                            },
                            "required": [
                              "id",
                              "familyId",
                              "userId",
                              "role",
                              "joinedAt",
                              "user"
                            ],
                            "title": "Family Member",
                            "description": "Family member information with user details"
                          },
                          "description": "Family members with user information"
                        },
                        "children": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901239",
                                "description": "Child identifier"
                              },
                              "familyId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901234",
                                "description": "Family identifier"
                              },
                              "firstName": {
                                "type": "string",
                                "example": "Emma",
                                "description": "Child first name"
                              },
                              "lastName": {
                                "type": "string",
                                "example": "Johnson",
                                "description": "Child last name"
                              },
                              "dateOfBirth": {
                                "type": "string",
                                "nullable": true,
                                "format": "date-time",
                                "example": "2015-05-15T00:00:00.000Z",
                                "description": "Child date of birth"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "Child creation timestamp"
                              },
                              "updatedAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "Child update timestamp"
                              }
                            },
                            "required": [
                              "id",
                              "familyId",
                              "firstName",
                              "lastName",
                              "dateOfBirth",
                              "createdAt",
                              "updatedAt"
                            ],
                            "title": "Child",
                            "description": "Child information"
                          },
                          "description": "Family children"
                        },
                        "vehicles": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901240",
                                "description": "Vehicle identifier"
                              },
                              "familyId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901234",
                                "description": "Family identifier"
                              },
                              "make": {
                                "type": "string",
                                "example": "Toyota",
                                "description": "Vehicle make"
                              },
                              "model": {
                                "type": "string",
                                "example": "Sienna",
                                "description": "Vehicle model"
                              },
                              "year": {
                                "type": "integer",
                                "minimum": 1900,
                                "maximum": 2100,
                                "example": 2020,
                                "description": "Vehicle year"
                              },
                              "color": {
                                "type": "string",
                                "example": "Blue",
                                "description": "Vehicle color"
                              },
                              "licensePlate": {
                                "type": "string",
                                "example": "ABC-123",
                                "description": "Vehicle license plate"
                              },
                              "capacity": {
                                "type": "integer",
                                "minimum": 1,
                                "maximum": 20,
                                "example": 7,
                                "description": "Vehicle seating capacity"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "Vehicle creation timestamp"
                              },
                              "updatedAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "Vehicle update timestamp"
                              }
                            },
                            "required": [
                              "id",
                              "familyId",
                              "make",
                              "model",
                              "year",
                              "capacity",
                              "createdAt",
                              "updatedAt"
                            ],
                            "title": "Vehicle",
                            "description": "Vehicle information"
                          },
                          "description": "Family vehicles"
                        },
                        "_count": {
                          "type": "object",
                          "properties": {
                            "members": {
                              "type": "number",
                              "example": 3,
                              "description": "Number of members in the family"
                            },
                            "children": {
                              "type": "number",
                              "example": 2,
                              "description": "Number of children in the family"
                            },
                            "vehicles": {
                              "type": "number",
                              "example": 1,
                              "description": "Number of vehicles in the family"
                            }
                          },
                          "required": [
                            "members",
                            "children",
                            "vehicles"
                          ],
                          "description": "Count information (included in some responses)"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "createdAt",
                        "updatedAt",
                        "members",
                        "children",
                        "vehicles"
                      ],
                      "title": "Family Response",
                      "description": "Complete family information with members, children, and vehicles"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - User already has a family"
          }
        }
      }
    },
    "/families/join": {
      "post": {
        "tags": [
          "Families"
        ],
        "summary": "Join family by invite code",
        "description": "Join a family using an invitation code",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postfamiliesJoin",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/JoinFamilyRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Family joined successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Unique family identifier (CUID format)"
                        },
                        "name": {
                          "type": "string",
                          "example": "Johnson Family",
                          "description": "Family display name"
                        },
                        "inviteCode": {
                          "type": "string",
                          "nullable": true,
                          "example": null,
                          "description": "Family invite code (deprecated - using unified invitation system)"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Family creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Family update timestamp"
                        },
                        "members": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901238",
                                "description": "Family member identifier"
                              },
                              "familyId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901234",
                                "description": "Family identifier"
                              },
                              "userId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901237",
                                "description": "User identifier"
                              },
                              "role": {
                                "type": "string",
                                "enum": [
                                  "ADMIN",
                                  "MEMBER"
                                ],
                                "description": "Member role in the family",
                                "example": "ADMIN"
                              },
                              "joinedAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "When the member joined the family"
                              },
                              "user": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid",
                                    "example": "cl123456789012345678901237",
                                    "description": "User identifier"
                                  },
                                  "email": {
                                    "type": "string",
                                    "format": "email",
                                    "example": "john.smith@example.com",
                                    "description": "User email address"
                                  },
                                  "name": {
                                    "type": "string",
                                    "example": "John Smith",
                                    "description": "User display name"
                                  }
                                },
                                "required": [
                                  "id",
                                  "email",
                                  "name"
                                ],
                                "title": "User",
                                "description": "User information"
                              }
                            },
                            "required": [
                              "id",
                              "familyId",
                              "userId",
                              "role",
                              "joinedAt",
                              "user"
                            ],
                            "title": "Family Member",
                            "description": "Family member information with user details"
                          },
                          "description": "Family members with user information"
                        },
                        "children": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901239",
                                "description": "Child identifier"
                              },
                              "familyId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901234",
                                "description": "Family identifier"
                              },
                              "firstName": {
                                "type": "string",
                                "example": "Emma",
                                "description": "Child first name"
                              },
                              "lastName": {
                                "type": "string",
                                "example": "Johnson",
                                "description": "Child last name"
                              },
                              "dateOfBirth": {
                                "type": "string",
                                "nullable": true,
                                "format": "date-time",
                                "example": "2015-05-15T00:00:00.000Z",
                                "description": "Child date of birth"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "Child creation timestamp"
                              },
                              "updatedAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "Child update timestamp"
                              }
                            },
                            "required": [
                              "id",
                              "familyId",
                              "firstName",
                              "lastName",
                              "dateOfBirth",
                              "createdAt",
                              "updatedAt"
                            ],
                            "title": "Child",
                            "description": "Child information"
                          },
                          "description": "Family children"
                        },
                        "vehicles": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901240",
                                "description": "Vehicle identifier"
                              },
                              "familyId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901234",
                                "description": "Family identifier"
                              },
                              "make": {
                                "type": "string",
                                "example": "Toyota",
                                "description": "Vehicle make"
                              },
                              "model": {
                                "type": "string",
                                "example": "Sienna",
                                "description": "Vehicle model"
                              },
                              "year": {
                                "type": "integer",
                                "minimum": 1900,
                                "maximum": 2100,
                                "example": 2020,
                                "description": "Vehicle year"
                              },
                              "color": {
                                "type": "string",
                                "example": "Blue",
                                "description": "Vehicle color"
                              },
                              "licensePlate": {
                                "type": "string",
                                "example": "ABC-123",
                                "description": "Vehicle license plate"
                              },
                              "capacity": {
                                "type": "integer",
                                "minimum": 1,
                                "maximum": 20,
                                "example": 7,
                                "description": "Vehicle seating capacity"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "Vehicle creation timestamp"
                              },
                              "updatedAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "Vehicle update timestamp"
                              }
                            },
                            "required": [
                              "id",
                              "familyId",
                              "make",
                              "model",
                              "year",
                              "capacity",
                              "createdAt",
                              "updatedAt"
                            ],
                            "title": "Vehicle",
                            "description": "Vehicle information"
                          },
                          "description": "Family vehicles"
                        },
                        "_count": {
                          "type": "object",
                          "properties": {
                            "members": {
                              "type": "number",
                              "example": 3,
                              "description": "Number of members in the family"
                            },
                            "children": {
                              "type": "number",
                              "example": 2,
                              "description": "Number of children in the family"
                            },
                            "vehicles": {
                              "type": "number",
                              "example": 1,
                              "description": "Number of vehicles in the family"
                            }
                          },
                          "required": [
                            "members",
                            "children",
                            "vehicles"
                          ],
                          "description": "Count information (included in some responses)"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "createdAt",
                        "updatedAt",
                        "members",
                        "children",
                        "vehicles"
                      ],
                      "title": "Family Response",
                      "description": "Complete family information with members, children, and vehicles"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid invite code or already a family member"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          }
        }
      }
    },
    "/families/current": {
      "get": {
        "tags": [
          "Families"
        ],
        "summary": "Get current family",
        "description": "Retrieve the current family of the authenticated user",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getfamiliesCurrent",
        "responses": {
          "200": {
            "description": "Family retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Unique family identifier (CUID format)"
                        },
                        "name": {
                          "type": "string",
                          "example": "Johnson Family",
                          "description": "Family display name"
                        },
                        "inviteCode": {
                          "type": "string",
                          "nullable": true,
                          "example": null,
                          "description": "Family invite code (deprecated - using unified invitation system)"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Family creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Family update timestamp"
                        },
                        "members": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901238",
                                "description": "Family member identifier"
                              },
                              "familyId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901234",
                                "description": "Family identifier"
                              },
                              "userId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901237",
                                "description": "User identifier"
                              },
                              "role": {
                                "type": "string",
                                "enum": [
                                  "ADMIN",
                                  "MEMBER"
                                ],
                                "description": "Member role in the family",
                                "example": "ADMIN"
                              },
                              "joinedAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "When the member joined the family"
                              },
                              "user": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid",
                                    "example": "cl123456789012345678901237",
                                    "description": "User identifier"
                                  },
                                  "email": {
                                    "type": "string",
                                    "format": "email",
                                    "example": "john.smith@example.com",
                                    "description": "User email address"
                                  },
                                  "name": {
                                    "type": "string",
                                    "example": "John Smith",
                                    "description": "User display name"
                                  }
                                },
                                "required": [
                                  "id",
                                  "email",
                                  "name"
                                ],
                                "title": "User",
                                "description": "User information"
                              }
                            },
                            "required": [
                              "id",
                              "familyId",
                              "userId",
                              "role",
                              "joinedAt",
                              "user"
                            ],
                            "title": "Family Member",
                            "description": "Family member information with user details"
                          },
                          "description": "Family members with user information"
                        },
                        "children": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901239",
                                "description": "Child identifier"
                              },
                              "familyId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901234",
                                "description": "Family identifier"
                              },
                              "firstName": {
                                "type": "string",
                                "example": "Emma",
                                "description": "Child first name"
                              },
                              "lastName": {
                                "type": "string",
                                "example": "Johnson",
                                "description": "Child last name"
                              },
                              "dateOfBirth": {
                                "type": "string",
                                "nullable": true,
                                "format": "date-time",
                                "example": "2015-05-15T00:00:00.000Z",
                                "description": "Child date of birth"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "Child creation timestamp"
                              },
                              "updatedAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "Child update timestamp"
                              }
                            },
                            "required": [
                              "id",
                              "familyId",
                              "firstName",
                              "lastName",
                              "dateOfBirth",
                              "createdAt",
                              "updatedAt"
                            ],
                            "title": "Child",
                            "description": "Child information"
                          },
                          "description": "Family children"
                        },
                        "vehicles": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901240",
                                "description": "Vehicle identifier"
                              },
                              "familyId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901234",
                                "description": "Family identifier"
                              },
                              "make": {
                                "type": "string",
                                "example": "Toyota",
                                "description": "Vehicle make"
                              },
                              "model": {
                                "type": "string",
                                "example": "Sienna",
                                "description": "Vehicle model"
                              },
                              "year": {
                                "type": "integer",
                                "minimum": 1900,
                                "maximum": 2100,
                                "example": 2020,
                                "description": "Vehicle year"
                              },
                              "color": {
                                "type": "string",
                                "example": "Blue",
                                "description": "Vehicle color"
                              },
                              "licensePlate": {
                                "type": "string",
                                "example": "ABC-123",
                                "description": "Vehicle license plate"
                              },
                              "capacity": {
                                "type": "integer",
                                "minimum": 1,
                                "maximum": 20,
                                "example": 7,
                                "description": "Vehicle seating capacity"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "Vehicle creation timestamp"
                              },
                              "updatedAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "Vehicle update timestamp"
                              }
                            },
                            "required": [
                              "id",
                              "familyId",
                              "make",
                              "model",
                              "year",
                              "capacity",
                              "createdAt",
                              "updatedAt"
                            ],
                            "title": "Vehicle",
                            "description": "Vehicle information"
                          },
                          "description": "Family vehicles"
                        },
                        "_count": {
                          "type": "object",
                          "properties": {
                            "members": {
                              "type": "number",
                              "example": 3,
                              "description": "Number of members in the family"
                            },
                            "children": {
                              "type": "number",
                              "example": 2,
                              "description": "Number of children in the family"
                            },
                            "vehicles": {
                              "type": "number",
                              "example": 1,
                              "description": "Number of vehicles in the family"
                            }
                          },
                          "required": [
                            "members",
                            "children",
                            "vehicles"
                          ],
                          "description": "Count information (included in some responses)"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "createdAt",
                        "updatedAt",
                        "members",
                        "children",
                        "vehicles"
                      ],
                      "title": "Family Response",
                      "description": "Complete family information with members, children, and vehicles"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "404": {
            "description": "Not found - User is not part of any family"
          }
        }
      }
    },
    "/families/{familyId}/permissions": {
      "get": {
        "tags": [
          "Families"
        ],
        "summary": "Get user permissions in family",
        "description": "Retrieve user permissions for a specific family",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getfamiliesByFamilyIdPermissions",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique family identifier (CUID format)"
            },
            "required": true,
            "description": "Unique family identifier (CUID format)",
            "name": "familyId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Permissions retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "canManageMembers": {
                          "type": "boolean",
                          "example": true,
                          "description": "Can manage family members"
                        },
                        "canModifyChildren": {
                          "type": "boolean",
                          "example": true,
                          "description": "Can modify family children"
                        },
                        "canModifyVehicles": {
                          "type": "boolean",
                          "example": true,
                          "description": "Can modify family vehicles"
                        },
                        "canViewFamily": {
                          "type": "boolean",
                          "example": true,
                          "description": "Can view family information"
                        }
                      },
                      "required": [
                        "canManageMembers",
                        "canModifyChildren",
                        "canModifyVehicles",
                        "canViewFamily"
                      ],
                      "title": "Family Permissions",
                      "description": "User permissions within a family"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid family ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Not a member of this family"
          }
        }
      }
    },
    "/families/members/{memberId}/role": {
      "put": {
        "tags": [
          "Families"
        ],
        "summary": "Update member role",
        "description": "Update a family member role. Requires family admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "putfamiliesMembersByMemberIdRole",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901235",
              "description": "Unique member identifier (CUID format)"
            },
            "required": true,
            "description": "Unique member identifier (CUID format)",
            "name": "memberId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateMemberRoleRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Member role updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data or member ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          }
        }
      }
    },
    "/families/invite-code": {
      "post": {
        "tags": [
          "Families"
        ],
        "summary": "Generate invite code (deprecated)",
        "description": "Generate permanent invite code for family. This endpoint is deprecated.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postfamiliesInviteCode",
        "responses": {
          "400": {
            "description": "Bad request - Feature deprecated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "error"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          }
        }
      }
    },
    "/families/{familyId}/invite": {
      "post": {
        "tags": [
          "Families"
        ],
        "summary": "Invite family member",
        "description": "Invite a new member to join the family. Requires family admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postfamiliesByFamilyIdInvite",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique family identifier (CUID format)"
            },
            "required": true,
            "description": "Unique family identifier (CUID format)",
            "name": "familyId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InviteMemberRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Member invited successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901236",
                          "description": "Invitation identifier"
                        },
                        "familyId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Family identifier"
                        },
                        "email": {
                          "type": "string",
                          "format": "email",
                          "example": "john.smith@example.com",
                          "description": "Invited email address"
                        },
                        "role": {
                          "type": "string",
                          "enum": [
                            "ADMIN",
                            "MEMBER"
                          ],
                          "description": "Invited role in the family",
                          "example": "MEMBER"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "PENDING",
                            "ACCEPTED",
                            "EXPIRED",
                            "CANCELLED"
                          ],
                          "description": "Invitation status",
                          "example": "PENDING"
                        },
                        "personalMessage": {
                          "type": "string",
                          "nullable": true,
                          "example": "Welcome to our family!",
                          "description": "Personal message from inviter"
                        },
                        "expiresAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-08T00:00:00.000Z",
                          "description": "Invitation expiration timestamp"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Invitation creation timestamp"
                        },
                        "family": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid"
                            },
                            "name": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "description": "Family information (included in some responses)"
                        }
                      },
                      "required": [
                        "id",
                        "familyId",
                        "email",
                        "role",
                        "status",
                        "expiresAt",
                        "createdAt"
                      ],
                      "title": "Family Invitation",
                      "description": "Family invitation information"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "message"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions or not a family member"
          }
        }
      }
    },
    "/families/{familyId}/invitations": {
      "get": {
        "tags": [
          "Families"
        ],
        "summary": "Get pending invitations",
        "description": "Retrieve all pending invitations for a family. Requires family membership.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getfamiliesByFamilyIdInvitations",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique family identifier (CUID format)"
            },
            "required": true,
            "description": "Unique family identifier (CUID format)",
            "name": "familyId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Pending invitations retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901236",
                            "description": "Invitation identifier"
                          },
                          "familyId": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901234",
                            "description": "Family identifier"
                          },
                          "email": {
                            "type": "string",
                            "format": "email",
                            "example": "john.smith@example.com",
                            "description": "Invited email address"
                          },
                          "role": {
                            "type": "string",
                            "enum": [
                              "ADMIN",
                              "MEMBER"
                            ],
                            "description": "Invited role in the family",
                            "example": "MEMBER"
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "PENDING",
                              "ACCEPTED",
                              "EXPIRED",
                              "CANCELLED"
                            ],
                            "description": "Invitation status",
                            "example": "PENDING"
                          },
                          "personalMessage": {
                            "type": "string",
                            "nullable": true,
                            "example": "Welcome to our family!",
                            "description": "Personal message from inviter"
                          },
                          "expiresAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2023-01-08T00:00:00.000Z",
                            "description": "Invitation expiration timestamp"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2023-01-01T00:00:00.000Z",
                            "description": "Invitation creation timestamp"
                          },
                          "family": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid"
                              },
                              "name": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name"
                            ],
                            "description": "Family information (included in some responses)"
                          }
                        },
                        "required": [
                          "id",
                          "familyId",
                          "email",
                          "role",
                          "status",
                          "expiresAt",
                          "createdAt"
                        ],
                        "title": "Family Invitation",
                        "description": "Family invitation information"
                      }
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid family ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Not a family member"
          }
        }
      }
    },
    "/families/{familyId}/invitations/{invitationId}": {
      "delete": {
        "tags": [
          "Families"
        ],
        "summary": "Cancel invitation",
        "description": "Cancel a pending family invitation. Requires family admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "deletefamiliesByFamilyIdInvitationsByInvitationId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique family identifier (CUID format)"
            },
            "required": true,
            "description": "Unique family identifier (CUID format)",
            "name": "familyId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901236",
              "description": "Unique invitation identifier (CUID format)"
            },
            "required": true,
            "description": "Unique invitation identifier (CUID format)",
            "name": "invitationId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Invitation cancelled successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid family or invitation ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          }
        }
      }
    },
    "/families/name": {
      "put": {
        "tags": [
          "Families"
        ],
        "summary": "Update family name",
        "description": "Update family name. Requires family admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "putfamiliesName",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateFamilyNameRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Family name updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Unique family identifier (CUID format)"
                        },
                        "name": {
                          "type": "string",
                          "example": "Johnson Family",
                          "description": "Family display name"
                        },
                        "inviteCode": {
                          "type": "string",
                          "nullable": true,
                          "example": null,
                          "description": "Family invite code (deprecated - using unified invitation system)"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Family creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Family update timestamp"
                        },
                        "members": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901238",
                                "description": "Family member identifier"
                              },
                              "familyId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901234",
                                "description": "Family identifier"
                              },
                              "userId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901237",
                                "description": "User identifier"
                              },
                              "role": {
                                "type": "string",
                                "enum": [
                                  "ADMIN",
                                  "MEMBER"
                                ],
                                "description": "Member role in the family",
                                "example": "ADMIN"
                              },
                              "joinedAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "When the member joined the family"
                              },
                              "user": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid",
                                    "example": "cl123456789012345678901237",
                                    "description": "User identifier"
                                  },
                                  "email": {
                                    "type": "string",
                                    "format": "email",
                                    "example": "john.smith@example.com",
                                    "description": "User email address"
                                  },
                                  "name": {
                                    "type": "string",
                                    "example": "John Smith",
                                    "description": "User display name"
                                  }
                                },
                                "required": [
                                  "id",
                                  "email",
                                  "name"
                                ],
                                "title": "User",
                                "description": "User information"
                              }
                            },
                            "required": [
                              "id",
                              "familyId",
                              "userId",
                              "role",
                              "joinedAt",
                              "user"
                            ],
                            "title": "Family Member",
                            "description": "Family member information with user details"
                          },
                          "description": "Family members with user information"
                        },
                        "children": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901239",
                                "description": "Child identifier"
                              },
                              "familyId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901234",
                                "description": "Family identifier"
                              },
                              "firstName": {
                                "type": "string",
                                "example": "Emma",
                                "description": "Child first name"
                              },
                              "lastName": {
                                "type": "string",
                                "example": "Johnson",
                                "description": "Child last name"
                              },
                              "dateOfBirth": {
                                "type": "string",
                                "nullable": true,
                                "format": "date-time",
                                "example": "2015-05-15T00:00:00.000Z",
                                "description": "Child date of birth"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "Child creation timestamp"
                              },
                              "updatedAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "Child update timestamp"
                              }
                            },
                            "required": [
                              "id",
                              "familyId",
                              "firstName",
                              "lastName",
                              "dateOfBirth",
                              "createdAt",
                              "updatedAt"
                            ],
                            "title": "Child",
                            "description": "Child information"
                          },
                          "description": "Family children"
                        },
                        "vehicles": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901240",
                                "description": "Vehicle identifier"
                              },
                              "familyId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901234",
                                "description": "Family identifier"
                              },
                              "make": {
                                "type": "string",
                                "example": "Toyota",
                                "description": "Vehicle make"
                              },
                              "model": {
                                "type": "string",
                                "example": "Sienna",
                                "description": "Vehicle model"
                              },
                              "year": {
                                "type": "integer",
                                "minimum": 1900,
                                "maximum": 2100,
                                "example": 2020,
                                "description": "Vehicle year"
                              },
                              "color": {
                                "type": "string",
                                "example": "Blue",
                                "description": "Vehicle color"
                              },
                              "licensePlate": {
                                "type": "string",
                                "example": "ABC-123",
                                "description": "Vehicle license plate"
                              },
                              "capacity": {
                                "type": "integer",
                                "minimum": 1,
                                "maximum": 20,
                                "example": 7,
                                "description": "Vehicle seating capacity"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "Vehicle creation timestamp"
                              },
                              "updatedAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "Vehicle update timestamp"
                              }
                            },
                            "required": [
                              "id",
                              "familyId",
                              "make",
                              "model",
                              "year",
                              "capacity",
                              "createdAt",
                              "updatedAt"
                            ],
                            "title": "Vehicle",
                            "description": "Vehicle information"
                          },
                          "description": "Family vehicles"
                        },
                        "_count": {
                          "type": "object",
                          "properties": {
                            "members": {
                              "type": "number",
                              "example": 3,
                              "description": "Number of members in the family"
                            },
                            "children": {
                              "type": "number",
                              "example": 2,
                              "description": "Number of children in the family"
                            },
                            "vehicles": {
                              "type": "number",
                              "example": 1,
                              "description": "Number of vehicles in the family"
                            }
                          },
                          "required": [
                            "members",
                            "children",
                            "vehicles"
                          ],
                          "description": "Count information (included in some responses)"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "createdAt",
                        "updatedAt",
                        "members",
                        "children",
                        "vehicles"
                      ],
                      "title": "Family Response",
                      "description": "Complete family information with members, children, and vehicles"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "message"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          }
        }
      }
    },
    "/families/{familyId}/members/{memberId}": {
      "delete": {
        "tags": [
          "Families"
        ],
        "summary": "Remove family member",
        "description": "Remove a member from the family. Requires family admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "deletefamiliesByFamilyIdMembersByMemberId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique family identifier (CUID format)"
            },
            "required": true,
            "description": "Unique family identifier (CUID format)",
            "name": "familyId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901235",
              "description": "Unique member identifier (CUID format)"
            },
            "required": true,
            "description": "Unique member identifier (CUID format)",
            "name": "memberId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Member removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid family or member ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions or not a family member"
          }
        }
      }
    },
    "/families/{familyId}/leave": {
      "post": {
        "tags": [
          "Families"
        ],
        "summary": "Leave family",
        "description": "Leave the current family as a member",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postfamiliesByFamilyIdLeave",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique family identifier (CUID format)"
            },
            "required": true,
            "description": "Unique family identifier (CUID format)",
            "name": "familyId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Family left successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "Successfully left the family",
                          "description": "Success message"
                        }
                      },
                      "required": [
                        "message"
                      ],
                      "title": "Leave Family Response",
                      "description": "Response when leaving a family"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Cannot leave as last admin or not a family member"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          }
        }
      }
    },
    "/dashboard/stats": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Get dashboard statistics",
        "description": "Retrieve user dashboard statistics including counts and trends",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getdashboardStats",
        "responses": {
          "200": {
            "description": "Dashboard statistics retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "groups": {
                          "type": "integer",
                          "minimum": 0,
                          "example": 3,
                          "description": "Number of groups the user belongs to"
                        },
                        "children": {
                          "type": "integer",
                          "minimum": 0,
                          "example": 2,
                          "description": "Number of children in the family"
                        },
                        "vehicles": {
                          "type": "integer",
                          "minimum": 0,
                          "example": 1,
                          "description": "Number of vehicles in the family"
                        },
                        "thisWeekTrips": {
                          "type": "integer",
                          "minimum": 0,
                          "example": 5,
                          "description": "Number of trips scheduled for this week"
                        },
                        "trends": {
                          "type": "object",
                          "properties": {
                            "groups": {
                              "type": "object",
                              "properties": {
                                "value": {
                                  "type": "string",
                                  "example": "Active",
                                  "description": "Trend value"
                                },
                                "direction": {
                                  "type": "string",
                                  "enum": [
                                    "up",
                                    "down",
                                    "neutral"
                                  ],
                                  "description": "Trend direction",
                                  "example": "neutral"
                                },
                                "period": {
                                  "type": "string",
                                  "example": "current",
                                  "description": "Time period for the trend"
                                }
                              },
                              "required": [
                                "value",
                                "direction",
                                "period"
                              ],
                              "title": "Trend Data",
                              "description": "Groups trend information"
                            },
                            "children": {
                              "type": "object",
                              "properties": {
                                "value": {
                                  "type": "string",
                                  "example": "Active",
                                  "description": "Trend value"
                                },
                                "direction": {
                                  "type": "string",
                                  "enum": [
                                    "up",
                                    "down",
                                    "neutral"
                                  ],
                                  "description": "Trend direction",
                                  "example": "neutral"
                                },
                                "period": {
                                  "type": "string",
                                  "example": "current",
                                  "description": "Time period for the trend"
                                }
                              },
                              "required": [
                                "value",
                                "direction",
                                "period"
                              ],
                              "title": "Trend Data",
                              "description": "Children trend information"
                            },
                            "vehicles": {
                              "type": "object",
                              "properties": {
                                "value": {
                                  "type": "string",
                                  "example": "Active",
                                  "description": "Trend value"
                                },
                                "direction": {
                                  "type": "string",
                                  "enum": [
                                    "up",
                                    "down",
                                    "neutral"
                                  ],
                                  "description": "Trend direction",
                                  "example": "neutral"
                                },
                                "period": {
                                  "type": "string",
                                  "example": "current",
                                  "description": "Time period for the trend"
                                }
                              },
                              "required": [
                                "value",
                                "direction",
                                "period"
                              ],
                              "title": "Trend Data",
                              "description": "Vehicles trend information"
                            },
                            "trips": {
                              "type": "object",
                              "properties": {
                                "value": {
                                  "type": "string",
                                  "example": "Active",
                                  "description": "Trend value"
                                },
                                "direction": {
                                  "type": "string",
                                  "enum": [
                                    "up",
                                    "down",
                                    "neutral"
                                  ],
                                  "description": "Trend direction",
                                  "example": "neutral"
                                },
                                "period": {
                                  "type": "string",
                                  "example": "current",
                                  "description": "Time period for the trend"
                                }
                              },
                              "required": [
                                "value",
                                "direction",
                                "period"
                              ],
                              "title": "Trend Data",
                              "description": "Trips trend information"
                            }
                          },
                          "required": [
                            "groups",
                            "children",
                            "vehicles",
                            "trips"
                          ],
                          "description": "Trend data for various statistics"
                        }
                      },
                      "required": [
                        "groups",
                        "children",
                        "vehicles",
                        "thisWeekTrips",
                        "trends"
                      ],
                      "title": "Dashboard Statistics",
                      "description": "Dashboard statistics including counts and trends"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/dashboard/today-schedule": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Get today's schedule",
        "description": "Retrieve today's trips and schedule for the authenticated user",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getdashboardTodaySchedule",
        "responses": {
          "200": {
            "description": "Today's schedule retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "upcomingTrips": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901242",
                                "description": "Trip identifier"
                              },
                              "time": {
                                "type": "string",
                                "example": "08:30",
                                "description": "Trip time in HH:MM format (UTC)"
                              },
                              "datetime": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T08:30:00.000Z",
                                "description": "Full trip datetime in ISO 8601 format for timezone conversion"
                              },
                              "date": {
                                "type": "string",
                                "example": "Today",
                                "description": "Trip date display name"
                              },
                              "children": {
                                "type": "array",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "string",
                                      "format": "cuid",
                                      "example": "cl123456789012345678901239",
                                      "description": "Child identifier"
                                    },
                                    "name": {
                                      "type": "string",
                                      "example": "Emma Johnson",
                                      "description": "Child name"
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "name"
                                  ],
                                  "title": "Trip Child",
                                  "description": "Child information in trip context"
                                },
                                "description": "Children assigned to this trip"
                              },
                              "vehicle": {
                                "type": "object",
                                "nullable": true,
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid",
                                    "example": "cl123456789012345678901240",
                                    "description": "Vehicle identifier"
                                  },
                                  "name": {
                                    "type": "string",
                                    "example": "Toyota Sienna",
                                    "description": "Vehicle name"
                                  },
                                  "capacity": {
                                    "type": "integer",
                                    "minimum": 1,
                                    "example": 7,
                                    "description": "Vehicle seating capacity"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name",
                                  "capacity"
                                ],
                                "title": "Trip Vehicle",
                                "description": "Vehicle assigned to this trip"
                              },
                              "driver": {
                                "type": "object",
                                "nullable": true,
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid",
                                    "example": "cl123456789012345678901237",
                                    "description": "Driver identifier"
                                  },
                                  "name": {
                                    "type": "string",
                                    "example": "John Smith",
                                    "description": "Driver name"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name"
                                ],
                                "title": "Trip Driver",
                                "description": "Driver assigned to this trip"
                              },
                              "group": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid",
                                    "example": "cl123456789012345678901241",
                                    "description": "Group identifier"
                                  },
                                  "name": {
                                    "type": "string",
                                    "example": "School Carpool Group A",
                                    "description": "Group name"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name"
                                ],
                                "title": "Trip Group",
                                "description": "Group associated with this trip"
                              }
                            },
                            "required": [
                              "id",
                              "time",
                              "datetime",
                              "date",
                              "children",
                              "group"
                            ],
                            "title": "Today Trip",
                            "description": "Trip information for today's schedule"
                          },
                          "description": "List of upcoming trips for today"
                        }
                      },
                      "required": [
                        "upcomingTrips"
                      ],
                      "title": "Today Schedule Response",
                      "description": "Today's schedule with upcoming trips"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/dashboard/weekly": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Get weekly dashboard",
        "description": "Retrieve complete weekly dashboard with schedules and summary statistics",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getdashboardWeekly",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2023-01-01T00:00:00.000Z",
              "description": "Optional start date for the weekly dashboard (ISO 8601 format)"
            },
            "required": false,
            "description": "Optional start date for the weekly dashboard (ISO 8601 format)",
            "name": "startDate",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Weekly dashboard retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WeeklyDashboardResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid date format",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "error"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required or no family associated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/dashboard/recent-activity": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Get recent activity",
        "description": "Retrieve recent activity log for the user and their family",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getdashboardRecentActivity",
        "responses": {
          "200": {
            "description": "Recent activity retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "activities": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901243",
                                "description": "Activity identifier"
                              },
                              "action": {
                                "type": "string",
                                "example": "Added child Emma to family",
                                "description": "Activity description"
                              },
                              "time": {
                                "type": "string",
                                "example": "2 hours ago",
                                "description": "Human-readable time since activity"
                              },
                              "timestamp": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T12:00:00.000Z",
                                "description": "Activity timestamp in ISO 8601 format"
                              },
                              "type": {
                                "type": "string",
                                "enum": [
                                  "group",
                                  "vehicle",
                                  "child",
                                  "schedule"
                                ],
                                "description": "Type of activity",
                                "example": "child"
                              },
                              "entityId": {
                                "type": "string",
                                "nullable": true,
                                "format": "cuid",
                                "example": "cl123456789012345678901239",
                                "description": "Related entity identifier"
                              },
                              "entityName": {
                                "type": "string",
                                "nullable": true,
                                "example": "Emma Johnson",
                                "description": "Related entity name"
                              }
                            },
                            "required": [
                              "id",
                              "action",
                              "time",
                              "timestamp",
                              "type"
                            ],
                            "title": "Activity Item",
                            "description": "Activity log item for dashboard display"
                          },
                          "description": "List of recent activities"
                        }
                      },
                      "required": [
                        "activities"
                      ],
                      "title": "Recent Activity Response",
                      "description": "Recent activity log for dashboard"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/invitations/validate/{code}": {
      "get": {
        "tags": [
          "Invitations"
        ],
        "summary": "Validate invitation code (public)",
        "description": "Validate an invitation code without authentication. Checks both family and group invitations.",
        "operationId": "getinvitationsValidateByCode",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "example": "ABC123XYZ789",
              "description": "Invitation code parameter"
            },
            "required": true,
            "description": "Invitation code parameter",
            "name": "code",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Invitation validation result",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "valid": {
                          "type": "boolean",
                          "example": true,
                          "description": "Whether the invitation code is valid"
                        },
                        "type": {
                          "type": "string",
                          "enum": [
                            "FAMILY",
                            "GROUP"
                          ],
                          "description": "Type of invitation (if valid)",
                          "example": "FAMILY"
                        },
                        "family": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid",
                              "example": "cl123456789012345678901234",
                              "description": "Family identifier"
                            },
                            "name": {
                              "type": "string",
                              "example": "Johnson Family",
                              "description": "Family name"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "title": "Family",
                          "description": "Family information (if family invitation and valid)"
                        },
                        "group": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid",
                              "example": "cl123456789012345678901235",
                              "description": "Group identifier"
                            },
                            "name": {
                              "type": "string",
                              "example": "Carpool Group",
                              "description": "Group name"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "title": "Group",
                          "description": "Group information (if group invitation and valid)"
                        },
                        "email": {
                          "type": "string",
                          "format": "email",
                          "example": "john.smith@example.com",
                          "description": "Email address the invitation was sent to (if valid)"
                        },
                        "role": {
                          "type": "string",
                          "example": "MEMBER",
                          "description": "Role in the invitation (if valid)"
                        },
                        "personalMessage": {
                          "type": "string",
                          "nullable": true,
                          "example": "Welcome to our family!",
                          "description": "Personal message from inviter (if valid)"
                        },
                        "expiresAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-08T00:00:00.000Z",
                          "description": "Invitation expiration timestamp (if valid)"
                        },
                        "error": {
                          "type": "string",
                          "example": "Invitation expired",
                          "description": "Error message if invitation is invalid"
                        }
                      },
                      "required": [
                        "valid",
                        "type"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Invitation not found or invalid",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "error"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/invitations/family": {
      "post": {
        "tags": [
          "Invitations"
        ],
        "summary": "Create family invitation",
        "description": "Create a new family invitation. Requires family admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postinvitationsFamily",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateFamilyInvitationRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Family invitation created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901237",
                          "description": "Invitation identifier"
                        },
                        "familyId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Family identifier"
                        },
                        "email": {
                          "type": "string",
                          "format": "email",
                          "example": "john.smith@example.com",
                          "description": "Invited email address"
                        },
                        "role": {
                          "type": "string",
                          "enum": [
                            "ADMIN",
                            "MEMBER"
                          ],
                          "description": "Invited role in the family",
                          "example": "MEMBER"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "PENDING",
                            "ACCEPTED",
                            "EXPIRED",
                            "CANCELLED"
                          ],
                          "description": "Invitation status",
                          "example": "PENDING"
                        },
                        "personalMessage": {
                          "type": "string",
                          "nullable": true,
                          "example": "Welcome to our family!",
                          "description": "Personal message from inviter"
                        },
                        "expiresAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-08T00:00:00.000Z",
                          "description": "Invitation expiration timestamp"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Invitation creation timestamp"
                        },
                        "family": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid",
                              "example": "cl123456789012345678901234",
                              "description": "Family identifier"
                            },
                            "name": {
                              "type": "string",
                              "example": "Johnson Family",
                              "description": "Family name"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "title": "Family",
                          "description": "Family information (included in some responses)"
                        }
                      },
                      "required": [
                        "id",
                        "familyId",
                        "email",
                        "role",
                        "status",
                        "expiresAt",
                        "createdAt"
                      ],
                      "title": "Family Invitation Response",
                      "description": "Family invitation information"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Only family administrators can send invitations"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/invitations/family/{code}/validate": {
      "get": {
        "tags": [
          "Invitations"
        ],
        "summary": "Validate family invitation code",
        "description": "Validate a family invitation code. Authentication is optional.",
        "operationId": "getinvitationsFamilyByCodeValidate",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "example": "ABC123XYZ789",
              "description": "Invitation code parameter"
            },
            "required": true,
            "description": "Invitation code parameter",
            "name": "code",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Family invitation validation result",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "valid": {
                          "type": "boolean",
                          "example": true,
                          "description": "Whether the invitation code is valid"
                        },
                        "type": {
                          "type": "string",
                          "enum": [
                            "FAMILY",
                            "GROUP"
                          ],
                          "description": "Type of invitation (if valid)",
                          "example": "FAMILY"
                        },
                        "family": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid",
                              "example": "cl123456789012345678901234",
                              "description": "Family identifier"
                            },
                            "name": {
                              "type": "string",
                              "example": "Johnson Family",
                              "description": "Family name"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "title": "Family",
                          "description": "Family information (if family invitation and valid)"
                        },
                        "group": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid",
                              "example": "cl123456789012345678901235",
                              "description": "Group identifier"
                            },
                            "name": {
                              "type": "string",
                              "example": "Carpool Group",
                              "description": "Group name"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "title": "Group",
                          "description": "Group information (if group invitation and valid)"
                        },
                        "email": {
                          "type": "string",
                          "format": "email",
                          "example": "john.smith@example.com",
                          "description": "Email address the invitation was sent to (if valid)"
                        },
                        "role": {
                          "type": "string",
                          "example": "MEMBER",
                          "description": "Role in the invitation (if valid)"
                        },
                        "personalMessage": {
                          "type": "string",
                          "nullable": true,
                          "example": "Welcome to our family!",
                          "description": "Personal message from inviter (if valid)"
                        },
                        "expiresAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-08T00:00:00.000Z",
                          "description": "Invitation expiration timestamp (if valid)"
                        },
                        "error": {
                          "type": "string",
                          "example": "Invitation expired",
                          "description": "Error message if invitation is invalid"
                        }
                      },
                      "required": [
                        "valid",
                        "type"
                      ],
                      "title": "Invitation Validation Response",
                      "description": "Invitation validation result"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid invitation code"
          },
          "404": {
            "description": "Invitation not found or invalid"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/invitations/family/{code}/accept": {
      "post": {
        "tags": [
          "Invitations"
        ],
        "summary": "Accept family invitation",
        "description": "Accept a family invitation using the invitation code",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postinvitationsFamilyByCodeAccept",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "example": "ABC123XYZ789",
              "description": "Invitation code parameter"
            },
            "required": true,
            "description": "Invitation code parameter",
            "name": "code",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AcceptFamilyInvitationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Family invitation accepted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": true,
                          "description": "Whether the invitation was accepted successfully"
                        },
                        "message": {
                          "type": "string",
                          "example": "Invitation accepted successfully",
                          "description": "Success message"
                        }
                      },
                      "required": [
                        "success"
                      ],
                      "title": "Accept Invitation Response",
                      "description": "Response when accepting an invitation"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid invitation code or cannot accept"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/invitations/group": {
      "post": {
        "tags": [
          "Invitations"
        ],
        "summary": "Create group invitation",
        "description": "Create a new group invitation. Requires group admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postinvitationsGroup",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGroupInvitationRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Group invitation created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901237",
                          "description": "Invitation identifier"
                        },
                        "groupId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901235",
                          "description": "Group identifier"
                        },
                        "targetFamilyId": {
                          "type": "string",
                          "nullable": true,
                          "format": "cuid",
                          "example": "cl123456789012345678901236",
                          "description": "Target family identifier"
                        },
                        "email": {
                          "type": "string",
                          "nullable": true,
                          "format": "email",
                          "example": "john.smith@example.com",
                          "description": "Invited email address"
                        },
                        "role": {
                          "type": "string",
                          "enum": [
                            "ADMIN",
                            "MEMBER"
                          ],
                          "description": "Invited role in the group",
                          "example": "MEMBER"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "PENDING",
                            "ACCEPTED",
                            "EXPIRED",
                            "CANCELLED"
                          ],
                          "description": "Invitation status",
                          "example": "PENDING"
                        },
                        "personalMessage": {
                          "type": "string",
                          "nullable": true,
                          "example": "Welcome to our group!",
                          "description": "Personal message from inviter"
                        },
                        "expiresAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-08T00:00:00.000Z",
                          "description": "Invitation expiration timestamp"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-01T00:00:00.000Z",
                          "description": "Invitation creation timestamp"
                        },
                        "group": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid",
                              "example": "cl123456789012345678901235",
                              "description": "Group identifier"
                            },
                            "name": {
                              "type": "string",
                              "example": "Carpool Group",
                              "description": "Group name"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "title": "Group",
                          "description": "Group information (included in some responses)"
                        }
                      },
                      "required": [
                        "id",
                        "groupId",
                        "role",
                        "status",
                        "expiresAt",
                        "createdAt"
                      ],
                      "title": "Group Invitation Response",
                      "description": "Group invitation information"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Only group administrators can send invitations"
          },
          "404": {
            "description": "Not found - Group or target family not found"
          },
          "409": {
            "description": "Conflict - Family already a member or already has pending invitation"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/invitations/group/{code}/validate": {
      "get": {
        "tags": [
          "Invitations"
        ],
        "summary": "Validate group invitation code",
        "description": "Validate a group invitation code. Authentication is optional.",
        "operationId": "getinvitationsGroupByCodeValidate",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "example": "ABC123XYZ789",
              "description": "Invitation code parameter"
            },
            "required": true,
            "description": "Invitation code parameter",
            "name": "code",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Group invitation validation result",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "valid": {
                          "type": "boolean",
                          "example": true,
                          "description": "Whether the invitation code is valid"
                        },
                        "type": {
                          "type": "string",
                          "enum": [
                            "FAMILY",
                            "GROUP"
                          ],
                          "description": "Type of invitation (if valid)",
                          "example": "FAMILY"
                        },
                        "family": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid",
                              "example": "cl123456789012345678901234",
                              "description": "Family identifier"
                            },
                            "name": {
                              "type": "string",
                              "example": "Johnson Family",
                              "description": "Family name"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "title": "Family",
                          "description": "Family information (if family invitation and valid)"
                        },
                        "group": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid",
                              "example": "cl123456789012345678901235",
                              "description": "Group identifier"
                            },
                            "name": {
                              "type": "string",
                              "example": "Carpool Group",
                              "description": "Group name"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "title": "Group",
                          "description": "Group information (if group invitation and valid)"
                        },
                        "email": {
                          "type": "string",
                          "format": "email",
                          "example": "john.smith@example.com",
                          "description": "Email address the invitation was sent to (if valid)"
                        },
                        "role": {
                          "type": "string",
                          "example": "MEMBER",
                          "description": "Role in the invitation (if valid)"
                        },
                        "personalMessage": {
                          "type": "string",
                          "nullable": true,
                          "example": "Welcome to our family!",
                          "description": "Personal message from inviter (if valid)"
                        },
                        "expiresAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-01-08T00:00:00.000Z",
                          "description": "Invitation expiration timestamp (if valid)"
                        },
                        "error": {
                          "type": "string",
                          "example": "Invitation expired",
                          "description": "Error message if invitation is invalid"
                        }
                      },
                      "required": [
                        "valid",
                        "type"
                      ],
                      "title": "Invitation Validation Response",
                      "description": "Invitation validation result"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid invitation code"
          },
          "404": {
            "description": "Invitation not found or invalid"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/invitations/group/{code}/accept": {
      "post": {
        "tags": [
          "Invitations"
        ],
        "summary": "Accept group invitation",
        "description": "Accept a group invitation using the invitation code",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postinvitationsGroupByCodeAccept",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "example": "ABC123XYZ789",
              "description": "Invitation code parameter"
            },
            "required": true,
            "description": "Invitation code parameter",
            "name": "code",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Group invitation accepted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "example": true,
                          "description": "Whether the invitation was accepted successfully"
                        },
                        "message": {
                          "type": "string",
                          "example": "Invitation accepted successfully",
                          "description": "Success message"
                        }
                      },
                      "required": [
                        "success"
                      ],
                      "title": "Accept Invitation Response",
                      "description": "Response when accepting an invitation"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid invitation code or cannot accept"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/invitations/user": {
      "get": {
        "tags": [
          "Invitations"
        ],
        "summary": "Get user invitations",
        "description": "Retrieve all pending invitations for the authenticated user",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getinvitationsUser",
        "responses": {
          "200": {
            "description": "User invitations retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "family": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901237",
                                "description": "Invitation identifier"
                              },
                              "familyId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901234",
                                "description": "Family identifier"
                              },
                              "email": {
                                "type": "string",
                                "format": "email",
                                "example": "john.smith@example.com",
                                "description": "Invited email address"
                              },
                              "role": {
                                "type": "string",
                                "enum": [
                                  "ADMIN",
                                  "MEMBER"
                                ],
                                "description": "Invited role in the family",
                                "example": "MEMBER"
                              },
                              "status": {
                                "type": "string",
                                "enum": [
                                  "PENDING",
                                  "ACCEPTED",
                                  "EXPIRED",
                                  "CANCELLED"
                                ],
                                "description": "Invitation status",
                                "example": "PENDING"
                              },
                              "personalMessage": {
                                "type": "string",
                                "nullable": true,
                                "example": "Welcome to our family!",
                                "description": "Personal message from inviter"
                              },
                              "expiresAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-08T00:00:00.000Z",
                                "description": "Invitation expiration timestamp"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "Invitation creation timestamp"
                              },
                              "family": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid",
                                    "example": "cl123456789012345678901234",
                                    "description": "Family identifier"
                                  },
                                  "name": {
                                    "type": "string",
                                    "example": "Johnson Family",
                                    "description": "Family name"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name"
                                ],
                                "title": "Family",
                                "description": "Family information (included in some responses)"
                              }
                            },
                            "required": [
                              "id",
                              "familyId",
                              "email",
                              "role",
                              "status",
                              "expiresAt",
                              "createdAt"
                            ],
                            "title": "Family Invitation Response",
                            "description": "Family invitation information"
                          },
                          "description": "Family invitations for the user"
                        },
                        "group": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901237",
                                "description": "Invitation identifier"
                              },
                              "groupId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901235",
                                "description": "Group identifier"
                              },
                              "targetFamilyId": {
                                "type": "string",
                                "nullable": true,
                                "format": "cuid",
                                "example": "cl123456789012345678901236",
                                "description": "Target family identifier"
                              },
                              "email": {
                                "type": "string",
                                "nullable": true,
                                "format": "email",
                                "example": "john.smith@example.com",
                                "description": "Invited email address"
                              },
                              "role": {
                                "type": "string",
                                "enum": [
                                  "ADMIN",
                                  "MEMBER"
                                ],
                                "description": "Invited role in the group",
                                "example": "MEMBER"
                              },
                              "status": {
                                "type": "string",
                                "enum": [
                                  "PENDING",
                                  "ACCEPTED",
                                  "EXPIRED",
                                  "CANCELLED"
                                ],
                                "description": "Invitation status",
                                "example": "PENDING"
                              },
                              "personalMessage": {
                                "type": "string",
                                "nullable": true,
                                "example": "Welcome to our group!",
                                "description": "Personal message from inviter"
                              },
                              "expiresAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-08T00:00:00.000Z",
                                "description": "Invitation expiration timestamp"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01T00:00:00.000Z",
                                "description": "Invitation creation timestamp"
                              },
                              "group": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid",
                                    "example": "cl123456789012345678901235",
                                    "description": "Group identifier"
                                  },
                                  "name": {
                                    "type": "string",
                                    "example": "Carpool Group",
                                    "description": "Group name"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name"
                                ],
                                "title": "Group",
                                "description": "Group information (included in some responses)"
                              }
                            },
                            "required": [
                              "id",
                              "groupId",
                              "role",
                              "status",
                              "expiresAt",
                              "createdAt"
                            ],
                            "title": "Group Invitation Response",
                            "description": "Group invitation information"
                          },
                          "description": "Group invitations for the user"
                        }
                      },
                      "required": [
                        "family",
                        "group"
                      ],
                      "title": "User Invitations",
                      "description": "All invitations for a user"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/invitations/family/{invitationId}": {
      "delete": {
        "tags": [
          "Invitations"
        ],
        "summary": "Cancel family invitation",
        "description": "Cancel a pending family invitation. Requires family admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "deleteinvitationsFamilyByInvitationId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901237",
              "description": "Unique invitation identifier (CUID format)"
            },
            "required": true,
            "description": "Unique invitation identifier (CUID format)",
            "name": "invitationId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Family invitation cancelled successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid invitation ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Only family administrators can cancel invitations"
          },
          "404": {
            "description": "Not found - Invitation not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/invitations/group/{invitationId}": {
      "delete": {
        "tags": [
          "Invitations"
        ],
        "summary": "Cancel group invitation",
        "description": "Cancel a pending group invitation. Requires group admin permissions.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "deleteinvitationsGroupByInvitationId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901237",
              "description": "Unique invitation identifier (CUID format)"
            },
            "required": true,
            "description": "Unique invitation identifier (CUID format)",
            "name": "invitationId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Group invitation cancelled successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid invitation ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Only group administrators can cancel invitations"
          },
          "404": {
            "description": "Not found - Invitation not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/schedule-slots/{scheduleSlotId}": {
      "get": {
        "tags": [
          "Schedule Slots"
        ],
        "summary": "Get schedule slot details",
        "description": "Retrieve detailed information for a specific schedule slot",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getScheduleSlotsByScheduleSlotId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique schedule slot identifier (CUID format)"
            },
            "required": true,
            "description": "Unique schedule slot identifier (CUID format)",
            "name": "scheduleSlotId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Schedule slot details retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Schedule slot identifier"
                        },
                        "datetime": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-12-15T08:00:00.000Z",
                          "description": "Schedule slot datetime"
                        },
                        "groupId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901235",
                          "description": "Group identifier"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-12-01T08:00:00.000Z",
                          "description": "Schedule slot creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-12-01T08:00:00.000Z",
                          "description": "Schedule slot update timestamp"
                        },
                        "vehicleAssignments": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901236",
                                "description": "Vehicle assignment identifier"
                              },
                              "scheduleSlotId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901234",
                                "description": "Schedule slot identifier"
                              },
                              "vehicleId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901237",
                                "description": "Vehicle identifier"
                              },
                              "driverId": {
                                "type": "string",
                                "nullable": true,
                                "format": "cuid",
                                "example": "cl123456789012345678901239",
                                "description": "Driver identifier (null if not assigned)"
                              },
                              "seatOverride": {
                                "type": "number",
                                "nullable": true,
                                "example": 6,
                                "description": "Seat capacity override (null if using default)"
                              },
                              "vehicle": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid"
                                  },
                                  "make": {
                                    "type": "string"
                                  },
                                  "model": {
                                    "type": "string"
                                  },
                                  "licensePlate": {
                                    "type": "string"
                                  },
                                  "capacity": {
                                    "type": "number"
                                  },
                                  "familyId": {
                                    "type": "string",
                                    "format": "cuid"
                                  }
                                },
                                "required": [
                                  "id",
                                  "make",
                                  "model",
                                  "licensePlate",
                                  "capacity",
                                  "familyId"
                                ],
                                "description": "Vehicle information (included when requested)"
                              },
                              "driver": {
                                "type": "object",
                                "nullable": true,
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid"
                                  },
                                  "firstName": {
                                    "type": "string"
                                  },
                                  "lastName": {
                                    "type": "string"
                                  },
                                  "email": {
                                    "type": "string",
                                    "format": "email"
                                  }
                                },
                                "required": [
                                  "id",
                                  "firstName",
                                  "lastName",
                                  "email"
                                ],
                                "description": "Driver information (included when requested)"
                              },
                              "_count": {
                                "type": "object",
                                "properties": {
                                  "childAssignments": {
                                    "type": "number",
                                    "example": 3,
                                    "description": "Number of children assigned to this vehicle"
                                  }
                                },
                                "required": [
                                  "childAssignments"
                                ],
                                "description": "Count information (included when requested)"
                              }
                            },
                            "required": [
                              "id",
                              "scheduleSlotId",
                              "vehicleId",
                              "driverId",
                              "seatOverride"
                            ],
                            "title": "Vehicle Assignment",
                            "description": "Vehicle assignment information for a schedule slot"
                          },
                          "description": "Vehicle assignments (included when requested)"
                        },
                        "childAssignments": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901240",
                                "description": "Child assignment identifier"
                              },
                              "scheduleSlotId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901234",
                                "description": "Schedule slot identifier"
                              },
                              "childId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901238",
                                "description": "Child identifier"
                              },
                              "vehicleAssignmentId": {
                                "type": "string",
                                "format": "cuid",
                                "example": "cl123456789012345678901236",
                                "description": "Vehicle assignment identifier"
                              },
                              "assignedAt": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-12-01T08:00:00.000Z",
                                "description": "Assignment timestamp"
                              },
                              "child": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid"
                                  },
                                  "firstName": {
                                    "type": "string"
                                  },
                                  "lastName": {
                                    "type": "string"
                                  },
                                  "dateOfBirth": {
                                    "type": "string",
                                    "format": "date-time"
                                  },
                                  "familyId": {
                                    "type": "string",
                                    "format": "cuid"
                                  }
                                },
                                "required": [
                                  "id",
                                  "firstName",
                                  "lastName",
                                  "dateOfBirth",
                                  "familyId"
                                ],
                                "description": "Child information (included when requested)"
                              },
                              "vehicleAssignment": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "cuid",
                                    "example": "cl123456789012345678901236",
                                    "description": "Vehicle assignment identifier"
                                  },
                                  "scheduleSlotId": {
                                    "type": "string",
                                    "format": "cuid",
                                    "example": "cl123456789012345678901234",
                                    "description": "Schedule slot identifier"
                                  },
                                  "vehicleId": {
                                    "type": "string",
                                    "format": "cuid",
                                    "example": "cl123456789012345678901237",
                                    "description": "Vehicle identifier"
                                  },
                                  "driverId": {
                                    "type": "string",
                                    "nullable": true,
                                    "format": "cuid",
                                    "example": "cl123456789012345678901239",
                                    "description": "Driver identifier (null if not assigned)"
                                  },
                                  "seatOverride": {
                                    "type": "number",
                                    "nullable": true,
                                    "example": 6,
                                    "description": "Seat capacity override (null if using default)"
                                  },
                                  "vehicle": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string",
                                        "format": "cuid"
                                      },
                                      "make": {
                                        "type": "string"
                                      },
                                      "model": {
                                        "type": "string"
                                      },
                                      "licensePlate": {
                                        "type": "string"
                                      },
                                      "capacity": {
                                        "type": "number"
                                      },
                                      "familyId": {
                                        "type": "string",
                                        "format": "cuid"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "make",
                                      "model",
                                      "licensePlate",
                                      "capacity",
                                      "familyId"
                                    ],
                                    "description": "Vehicle information (included when requested)"
                                  },
                                  "driver": {
                                    "type": "object",
                                    "nullable": true,
                                    "properties": {
                                      "id": {
                                        "type": "string",
                                        "format": "cuid"
                                      },
                                      "firstName": {
                                        "type": "string"
                                      },
                                      "lastName": {
                                        "type": "string"
                                      },
                                      "email": {
                                        "type": "string",
                                        "format": "email"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "firstName",
                                      "lastName",
                                      "email"
                                    ],
                                    "description": "Driver information (included when requested)"
                                  },
                                  "_count": {
                                    "type": "object",
                                    "properties": {
                                      "childAssignments": {
                                        "type": "number",
                                        "example": 3,
                                        "description": "Number of children assigned to this vehicle"
                                      }
                                    },
                                    "required": [
                                      "childAssignments"
                                    ],
                                    "description": "Count information (included when requested)"
                                  }
                                },
                                "required": [
                                  "id",
                                  "scheduleSlotId",
                                  "vehicleId",
                                  "driverId",
                                  "seatOverride"
                                ],
                                "title": "Vehicle Assignment",
                                "description": "Vehicle assignment information (included when requested)"
                              }
                            },
                            "required": [
                              "id",
                              "scheduleSlotId",
                              "childId",
                              "vehicleAssignmentId",
                              "assignedAt"
                            ],
                            "title": "Child Assignment",
                            "description": "Child assignment information for a schedule slot"
                          },
                          "description": "Child assignments (included when requested)"
                        },
                        "_count": {
                          "type": "object",
                          "properties": {
                            "vehicleAssignments": {
                              "type": "number",
                              "example": 2,
                              "description": "Number of vehicle assignments"
                            },
                            "childAssignments": {
                              "type": "number",
                              "example": 8,
                              "description": "Number of child assignments"
                            }
                          },
                          "required": [
                            "vehicleAssignments",
                            "childAssignments"
                          ],
                          "description": "Count information (included when requested)"
                        }
                      },
                      "required": [
                        "id",
                        "datetime",
                        "groupId",
                        "createdAt",
                        "updatedAt"
                      ],
                      "title": "Schedule Slot",
                      "description": "Schedule slot information"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid schedule slot ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - No access to this schedule slot"
          },
          "404": {
            "description": "Not found - Schedule slot does not exist"
          }
        }
      }
    },
    "/schedule-slots/{scheduleSlotId}/vehicles": {
      "post": {
        "tags": [
          "Schedule Slots"
        ],
        "summary": "Assign vehicle to schedule slot",
        "description": "Assign a vehicle to an existing schedule slot",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postScheduleSlotsByScheduleSlotIdVehicles",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique schedule slot identifier (CUID format)"
            },
            "required": true,
            "description": "Unique schedule slot identifier (CUID format)",
            "name": "scheduleSlotId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AssignVehicleRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Vehicle assigned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901236",
                          "description": "Vehicle assignment identifier"
                        },
                        "scheduleSlotId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Schedule slot identifier"
                        },
                        "vehicleId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901237",
                          "description": "Vehicle identifier"
                        },
                        "driverId": {
                          "type": "string",
                          "nullable": true,
                          "format": "cuid",
                          "example": "cl123456789012345678901239",
                          "description": "Driver identifier (null if not assigned)"
                        },
                        "seatOverride": {
                          "type": "number",
                          "nullable": true,
                          "example": 6,
                          "description": "Seat capacity override (null if using default)"
                        },
                        "vehicle": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid"
                            },
                            "make": {
                              "type": "string"
                            },
                            "model": {
                              "type": "string"
                            },
                            "licensePlate": {
                              "type": "string"
                            },
                            "capacity": {
                              "type": "number"
                            },
                            "familyId": {
                              "type": "string",
                              "format": "cuid"
                            }
                          },
                          "required": [
                            "id",
                            "make",
                            "model",
                            "licensePlate",
                            "capacity",
                            "familyId"
                          ],
                          "description": "Vehicle information (included when requested)"
                        },
                        "driver": {
                          "type": "object",
                          "nullable": true,
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid"
                            },
                            "firstName": {
                              "type": "string"
                            },
                            "lastName": {
                              "type": "string"
                            },
                            "email": {
                              "type": "string",
                              "format": "email"
                            }
                          },
                          "required": [
                            "id",
                            "firstName",
                            "lastName",
                            "email"
                          ],
                          "description": "Driver information (included when requested)"
                        },
                        "_count": {
                          "type": "object",
                          "properties": {
                            "childAssignments": {
                              "type": "number",
                              "example": 3,
                              "description": "Number of children assigned to this vehicle"
                            }
                          },
                          "required": [
                            "childAssignments"
                          ],
                          "description": "Count information (included when requested)"
                        }
                      },
                      "required": [
                        "id",
                        "scheduleSlotId",
                        "vehicleId",
                        "driverId",
                        "seatOverride"
                      ],
                      "title": "Vehicle Assignment",
                      "description": "Vehicle assignment information for a schedule slot"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data or vehicle already assigned"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Schedule slot or vehicle does not exist"
          }
        }
      },
      "delete": {
        "tags": [
          "Schedule Slots"
        ],
        "summary": "Remove vehicle from schedule slot",
        "description": "Remove a vehicle assignment from a schedule slot",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "deleteScheduleSlotsByScheduleSlotIdVehicles",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique schedule slot identifier (CUID format)"
            },
            "required": true,
            "description": "Unique schedule slot identifier (CUID format)",
            "name": "scheduleSlotId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VehicleIdRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Vehicle removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "enum": [
                            true
                          ]
                        },
                        "message": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "success",
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Schedule slot or vehicle assignment does not exist"
          }
        }
      }
    },
    "/schedule-slots/{scheduleSlotId}/vehicles/{vehicleId}/driver": {
      "patch": {
        "tags": [
          "Schedule Slots"
        ],
        "summary": "Update vehicle driver assignment",
        "description": "Update or remove driver for a vehicle assignment in a schedule slot",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "patchScheduleSlotsByScheduleSlotIdVehiclesByVehicleIdDriver",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique schedule slot identifier (CUID format)"
            },
            "required": true,
            "description": "Unique schedule slot identifier (CUID format)",
            "name": "scheduleSlotId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901237",
              "description": "Unique vehicle identifier (CUID format)"
            },
            "required": true,
            "description": "Unique vehicle identifier (CUID format)",
            "name": "vehicleId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateDriverRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Driver assignment updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901236",
                          "description": "Vehicle assignment identifier"
                        },
                        "scheduleSlotId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Schedule slot identifier"
                        },
                        "vehicleId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901237",
                          "description": "Vehicle identifier"
                        },
                        "driverId": {
                          "type": "string",
                          "nullable": true,
                          "format": "cuid",
                          "example": "cl123456789012345678901239",
                          "description": "Driver identifier (null if not assigned)"
                        },
                        "seatOverride": {
                          "type": "number",
                          "nullable": true,
                          "example": 6,
                          "description": "Seat capacity override (null if using default)"
                        },
                        "vehicle": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid"
                            },
                            "make": {
                              "type": "string"
                            },
                            "model": {
                              "type": "string"
                            },
                            "licensePlate": {
                              "type": "string"
                            },
                            "capacity": {
                              "type": "number"
                            },
                            "familyId": {
                              "type": "string",
                              "format": "cuid"
                            }
                          },
                          "required": [
                            "id",
                            "make",
                            "model",
                            "licensePlate",
                            "capacity",
                            "familyId"
                          ],
                          "description": "Vehicle information (included when requested)"
                        },
                        "driver": {
                          "type": "object",
                          "nullable": true,
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid"
                            },
                            "firstName": {
                              "type": "string"
                            },
                            "lastName": {
                              "type": "string"
                            },
                            "email": {
                              "type": "string",
                              "format": "email"
                            }
                          },
                          "required": [
                            "id",
                            "firstName",
                            "lastName",
                            "email"
                          ],
                          "description": "Driver information (included when requested)"
                        },
                        "_count": {
                          "type": "object",
                          "properties": {
                            "childAssignments": {
                              "type": "number",
                              "example": 3,
                              "description": "Number of children assigned to this vehicle"
                            }
                          },
                          "required": [
                            "childAssignments"
                          ],
                          "description": "Count information (included when requested)"
                        }
                      },
                      "required": [
                        "id",
                        "scheduleSlotId",
                        "vehicleId",
                        "driverId",
                        "seatOverride"
                      ],
                      "title": "Vehicle Assignment",
                      "description": "Vehicle assignment information for a schedule slot"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Schedule slot, vehicle, or assignment does not exist"
          }
        }
      }
    },
    "/schedule-slots/{scheduleSlotId}/children": {
      "post": {
        "tags": [
          "Schedule Slots"
        ],
        "summary": "Assign child to schedule slot",
        "description": "Assign a child to a specific vehicle assignment in a schedule slot",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "postScheduleSlotsByScheduleSlotIdChildren",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique schedule slot identifier (CUID format)"
            },
            "required": true,
            "description": "Unique schedule slot identifier (CUID format)",
            "name": "scheduleSlotId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AssignChildRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Child assigned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901240",
                          "description": "Child assignment identifier"
                        },
                        "scheduleSlotId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Schedule slot identifier"
                        },
                        "childId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901238",
                          "description": "Child identifier"
                        },
                        "vehicleAssignmentId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901236",
                          "description": "Vehicle assignment identifier"
                        },
                        "assignedAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2023-12-01T08:00:00.000Z",
                          "description": "Assignment timestamp"
                        },
                        "child": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid"
                            },
                            "firstName": {
                              "type": "string"
                            },
                            "lastName": {
                              "type": "string"
                            },
                            "dateOfBirth": {
                              "type": "string",
                              "format": "date-time"
                            },
                            "familyId": {
                              "type": "string",
                              "format": "cuid"
                            }
                          },
                          "required": [
                            "id",
                            "firstName",
                            "lastName",
                            "dateOfBirth",
                            "familyId"
                          ],
                          "description": "Child information (included when requested)"
                        },
                        "vehicleAssignment": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid",
                              "example": "cl123456789012345678901236",
                              "description": "Vehicle assignment identifier"
                            },
                            "scheduleSlotId": {
                              "type": "string",
                              "format": "cuid",
                              "example": "cl123456789012345678901234",
                              "description": "Schedule slot identifier"
                            },
                            "vehicleId": {
                              "type": "string",
                              "format": "cuid",
                              "example": "cl123456789012345678901237",
                              "description": "Vehicle identifier"
                            },
                            "driverId": {
                              "type": "string",
                              "nullable": true,
                              "format": "cuid",
                              "example": "cl123456789012345678901239",
                              "description": "Driver identifier (null if not assigned)"
                            },
                            "seatOverride": {
                              "type": "number",
                              "nullable": true,
                              "example": 6,
                              "description": "Seat capacity override (null if using default)"
                            },
                            "vehicle": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "cuid"
                                },
                                "make": {
                                  "type": "string"
                                },
                                "model": {
                                  "type": "string"
                                },
                                "licensePlate": {
                                  "type": "string"
                                },
                                "capacity": {
                                  "type": "number"
                                },
                                "familyId": {
                                  "type": "string",
                                  "format": "cuid"
                                }
                              },
                              "required": [
                                "id",
                                "make",
                                "model",
                                "licensePlate",
                                "capacity",
                                "familyId"
                              ],
                              "description": "Vehicle information (included when requested)"
                            },
                            "driver": {
                              "type": "object",
                              "nullable": true,
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "cuid"
                                },
                                "firstName": {
                                  "type": "string"
                                },
                                "lastName": {
                                  "type": "string"
                                },
                                "email": {
                                  "type": "string",
                                  "format": "email"
                                }
                              },
                              "required": [
                                "id",
                                "firstName",
                                "lastName",
                                "email"
                              ],
                              "description": "Driver information (included when requested)"
                            },
                            "_count": {
                              "type": "object",
                              "properties": {
                                "childAssignments": {
                                  "type": "number",
                                  "example": 3,
                                  "description": "Number of children assigned to this vehicle"
                                }
                              },
                              "required": [
                                "childAssignments"
                              ],
                              "description": "Count information (included when requested)"
                            }
                          },
                          "required": [
                            "id",
                            "scheduleSlotId",
                            "vehicleId",
                            "driverId",
                            "seatOverride"
                          ],
                          "title": "Vehicle Assignment",
                          "description": "Vehicle assignment information (included when requested)"
                        }
                      },
                      "required": [
                        "id",
                        "scheduleSlotId",
                        "childId",
                        "vehicleAssignmentId",
                        "assignedAt"
                      ],
                      "title": "Child Assignment",
                      "description": "Child assignment information for a schedule slot"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data or child already assigned"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Schedule slot, child, or vehicle assignment does not exist"
          }
        }
      }
    },
    "/schedule-slots/{scheduleSlotId}/children/{childId}": {
      "delete": {
        "tags": [
          "Schedule Slots"
        ],
        "summary": "Remove child from schedule slot",
        "description": "Remove a child assignment from a schedule slot",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "deleteScheduleSlotsByScheduleSlotIdChildrenByChildId",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique schedule slot identifier (CUID format)"
            },
            "required": true,
            "description": "Unique schedule slot identifier (CUID format)",
            "name": "scheduleSlotId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901238",
              "description": "Unique child identifier (CUID format)"
            },
            "required": true,
            "description": "Unique child identifier (CUID format)",
            "name": "childId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Child removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "enum": [
                            true
                          ]
                        },
                        "message": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "success",
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid schedule slot or child ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Schedule slot or child assignment does not exist"
          }
        }
      }
    },
    "/schedule-slots/{scheduleSlotId}/available-children": {
      "get": {
        "tags": [
          "Schedule Slots"
        ],
        "summary": "Get available children for schedule slot",
        "description": "Retrieve list of children available for assignment to a schedule slot",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getScheduleSlotsByScheduleSlotIdAvailableChildren",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique schedule slot identifier (CUID format)"
            },
            "required": true,
            "description": "Unique schedule slot identifier (CUID format)",
            "name": "scheduleSlotId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Available children retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901238",
                            "description": "Child identifier"
                          },
                          "firstName": {
                            "type": "string",
                            "example": "Emma",
                            "description": "Child first name"
                          },
                          "lastName": {
                            "type": "string",
                            "example": "Johnson",
                            "description": "Child last name"
                          },
                          "familyId": {
                            "type": "string",
                            "format": "cuid",
                            "example": "cl123456789012345678901241",
                            "description": "Family identifier"
                          },
                          "familyName": {
                            "type": "string",
                            "example": "Johnson Family",
                            "description": "Family name"
                          },
                          "canAssign": {
                            "type": "boolean",
                            "example": true,
                            "description": "Whether this child can be assigned to the slot"
                          },
                          "conflictReason": {
                            "type": "string",
                            "example": "Already assigned to another slot at this time",
                            "description": "Reason why child cannot be assigned (if applicable)"
                          }
                        },
                        "required": [
                          "id",
                          "firstName",
                          "lastName",
                          "familyId",
                          "familyName",
                          "canAssign"
                        ],
                        "title": "Available Child",
                        "description": "Available child for schedule slot assignment"
                      }
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid schedule slot ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - No access to this schedule slot"
          },
          "404": {
            "description": "Not found - Schedule slot does not exist"
          }
        }
      }
    },
    "/schedule-slots/{scheduleSlotId}/conflicts": {
      "get": {
        "tags": [
          "Schedule Slots"
        ],
        "summary": "Get schedule slot conflicts",
        "description": "Retrieve list of conflicts for a schedule slot",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "getScheduleSlotsByScheduleSlotIdConflicts",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901234",
              "description": "Unique schedule slot identifier (CUID format)"
            },
            "required": true,
            "description": "Unique schedule slot identifier (CUID format)",
            "name": "scheduleSlotId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Schedule slot conflicts retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "enum": [
                              "VEHICLE_OVERBOOKING",
                              "DRIVER_DOUBLE_BOOKING",
                              "CHILD_DOUBLE_BOOKING"
                            ],
                            "example": "VEHICLE_OVERBOOKING",
                            "description": "Type of conflict"
                          },
                          "description": {
                            "type": "string",
                            "example": "Vehicle exceeds capacity with current assignments",
                            "description": "Conflict description"
                          },
                          "severity": {
                            "type": "string",
                            "enum": [
                              "LOW",
                              "MEDIUM",
                              "HIGH",
                              "CRITICAL"
                            ],
                            "example": "MEDIUM",
                            "description": "Conflict severity level"
                          },
                          "details": {
                            "type": "object",
                            "properties": {
                              "vehicleId": {
                                "type": "string",
                                "nullable": true,
                                "example": "cl123456789012345678901237",
                                "description": "Vehicle ID involved in conflict"
                              },
                              "currentAssignments": {
                                "type": "integer",
                                "example": 6,
                                "description": "Current number of assignments"
                              },
                              "vehicleCapacity": {
                                "type": "integer",
                                "example": 5,
                                "description": "Maximum vehicle capacity"
                              },
                              "overbookedBy": {
                                "type": "integer",
                                "example": 1,
                                "description": "Number of overbooked slots"
                              }
                            },
                            "required": [
                              "currentAssignments",
                              "vehicleCapacity",
                              "overbookedBy"
                            ],
                            "example": {
                              "vehicleId": "cl123456789012345678901237",
                              "currentAssignments": 6,
                              "vehicleCapacity": 5,
                              "overbookedBy": 1
                            },
                            "description": "Additional conflict details"
                          }
                        },
                        "required": [
                          "type",
                          "description",
                          "severity"
                        ],
                        "title": "Schedule Slot Conflict",
                        "description": "Schedule slot conflict information"
                      }
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid schedule slot ID"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - No access to this schedule slot"
          },
          "404": {
            "description": "Not found - Schedule slot does not exist"
          }
        }
      }
    },
    "/schedule-slots/vehicle-assignments/{vehicleAssignmentId}/seat-override": {
      "patch": {
        "tags": [
          "Schedule Slots"
        ],
        "summary": "Update seat override for vehicle assignment",
        "description": "Update seat capacity override for a vehicle assignment",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "operationId": "patchScheduleSlotsVehicleAssignmentsByVehicleAssignmentIdSeatOverride",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "cuid",
              "example": "cl123456789012345678901236",
              "description": "Unique vehicle assignment identifier (CUID format)"
            },
            "required": true,
            "description": "Unique vehicle assignment identifier (CUID format)",
            "name": "vehicleAssignmentId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSeatOverrideRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Seat override updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901236",
                          "description": "Vehicle assignment identifier"
                        },
                        "scheduleSlotId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901234",
                          "description": "Schedule slot identifier"
                        },
                        "vehicleId": {
                          "type": "string",
                          "format": "cuid",
                          "example": "cl123456789012345678901237",
                          "description": "Vehicle identifier"
                        },
                        "driverId": {
                          "type": "string",
                          "nullable": true,
                          "format": "cuid",
                          "example": "cl123456789012345678901239",
                          "description": "Driver identifier (null if not assigned)"
                        },
                        "seatOverride": {
                          "type": "number",
                          "nullable": true,
                          "example": 6,
                          "description": "Seat capacity override (null if using default)"
                        },
                        "vehicle": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid"
                            },
                            "make": {
                              "type": "string"
                            },
                            "model": {
                              "type": "string"
                            },
                            "licensePlate": {
                              "type": "string"
                            },
                            "capacity": {
                              "type": "number"
                            },
                            "familyId": {
                              "type": "string",
                              "format": "cuid"
                            }
                          },
                          "required": [
                            "id",
                            "make",
                            "model",
                            "licensePlate",
                            "capacity",
                            "familyId"
                          ],
                          "description": "Vehicle information (included when requested)"
                        },
                        "driver": {
                          "type": "object",
                          "nullable": true,
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "cuid"
                            },
                            "firstName": {
                              "type": "string"
                            },
                            "lastName": {
                              "type": "string"
                            },
                            "email": {
                              "type": "string",
                              "format": "email"
                            }
                          },
                          "required": [
                            "id",
                            "firstName",
                            "lastName",
                            "email"
                          ],
                          "description": "Driver information (included when requested)"
                        },
                        "_count": {
                          "type": "object",
                          "properties": {
                            "childAssignments": {
                              "type": "number",
                              "example": 3,
                              "description": "Number of children assigned to this vehicle"
                            }
                          },
                          "required": [
                            "childAssignments"
                          ],
                          "description": "Count information (included when requested)"
                        }
                      },
                      "required": [
                        "id",
                        "scheduleSlotId",
                        "vehicleId",
                        "driverId",
                        "seatOverride"
                      ],
                      "title": "Vehicle Assignment",
                      "description": "Vehicle assignment information for a schedule slot"
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input data"
          },
          "401": {
            "description": "Unauthorized - Authentication required"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "404": {
            "description": "Not found - Vehicle assignment does not exist"
          }
        }
      }
    }
  }
}